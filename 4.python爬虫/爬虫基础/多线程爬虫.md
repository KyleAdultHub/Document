多线程爬虫所需应用
Queue（对列对象）
介绍Queue
Queue是python中的标准库，可以直接import Queue引用;队列是线程间最常用的交换数据的形式。
Queue的作用
python下多线程对于资源的处理，加锁是个重要的环节，因为python原生的list,dict等，都是not thread safe的，所以使用Queue，可以不用手动添加资源锁就能解决资源竞争的问题。
在使用Queue进行参数传递的时候，只有Queue列队中有数据，线程就可以获得并执行任务，不需要等待其他线程对数据的处理并传递，更方便数据的传递和处理；
使用方法
创建队列对象
from queue import Queue
queue = Queue(maxsize = n)        创建一个最大容量为n的queue列队
将一个数值放在队列中
queue.put( )      向列队中添加任务，列队满后会阻塞等待
myqueue.put_nowait( )    想列队中添加任务，列队满后会报错
将一个数值从队列中取出
queue.get( )     从列队中取出任务
queue.get([block[, timeout]])        从列队中取出任务，超时后会报错
备注：从列队取出任务后，列队计数并不会减一，需要标记任务task_done
任务完成，列队技术减一
queue.task_done( )      列队计数减一
列队任务计数不为0时，阻塞线程
Queue.join( )                 列队如果不为空，阻塞主线程
其他查询列队状态的方法
Queue.qsize()              返回队列当前计数大小
Queue.empty()           如果队列为空，返回True,反之False
Queue.full()                  如果队列满了，返回True,反之False
Queue.full                    与 maxsize 大小对应
线程的使用（复习）
创建子线程
import threading
t1 = threading.Thread(target=function, args=(, ))
将子线程设置为守护进程
t1.setDeamon(True)   
启动子线程
t1.start( )
线程的使用策略
使用策略
创建不同功能任务需求的列队
在处理时间较长的功能函数处，使用比较多的线程
在处理时间比较快的函数处，使用比较少的线程
少创建一些线程，线程之间会进行资源的竞争，导致请求失败率增加
多设置一些最大请求次数，增加请求成功的几率
将失败的请求，任务，防止到一个列表/对列中，单独再对失败的进程进行统一执行
断点续爬的思想
场景
在我们爬取数据的时候，想要先停止爬取，将爬取的状态和数据保存，并想要下次爬取的时候再接着当前的状态继续爬取
实现方法
可以保存当前的所有的queue列队，在程序结束之前将queue对象存储到redis中
当下次启动程序的时候，从redis数据库中读取上次停止之前的queue对象
程序判断queue对象的状态，是否全部为空，如果不为空，那么便不需要再重新获取参数想queue列队中添加，直接接着之前的queue的装填进行爬取
多线程爬虫代码实例