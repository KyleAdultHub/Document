---
title: Restful api
date: "2016-11-29 22:00:00"
categories:
- python
- 网络协议与python
tags:
- python
- 网络协议
toc: true
typora-root-url: ..\..\..
---

<html>
<body>
<div>
<span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-weight: bold; color: rgb(50, 135, 18); font-size: 14pt;-evernote-highlight:true;">RESTful 的介绍</span></span></div><div><ul><li><div><span style="line-height: 13.6px; font-weight: bold; font-size: 10pt;">RESTful的概念</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">REST:Representational State Transfer的缩写，翻译：“具象状态传输”。一般解释为“表现层状态转换”。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">REST是设计风格而不是标准。是指客户端和服务器的交互形式。我们需要关注的重点是如何设计REST风格的网络接口。</span></div></li></ul></ul></div><ul><li><div><span style="font-weight: bold; font-size: 10pt;">REST的特点</span></div></li><ul><li><div><span style="font-size: 9pt;">每一个URI代表一种资源，独一无二；</span></div></li><li><div><span style="font-size: 9pt;">客户端和服务器之间，传递这种资源的某种表现层，<span style="font-size: 9pt;">txt格式、html格式、json格式、jpg格式等。浏览器通过URL确定资源的位置，但是需要在HTTP请求头中，用Accept和Content-Type字段指定，这两个字段是对资源表现的描述。</span></span></div></li><li><div><span style="font-size: 9pt;">交互过程，一定会有数据和状态的转化，这种转化叫做状态转换。其中，GET表示获取资源，POST表示新建资源，PUT表示更新资源，DELETE表示删除资源。HTTP协议中最常用的就是这四种操作方式。</span></div></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-weight: bold; color: rgb(50, 135, 18); font-size: 14pt;-evernote-highlight:true;">如何设计符合RESTful风格的API</span></span></div><div><ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">一、域名：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">将api部署在专用域名下：</span></div></li><ul><li><div><span style="line-height: 13.6px;">http://api.example.com</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">或者将api放在主域名下：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">http://www.example.com/api/</span></div></li></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">二、版本：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">将API的版本号放在url中。</span></div></li><ul><li><div>http://www.example.com/app/1.2/info</div></li></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">三、路径：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">路径表示API的具体网址。每个网址代表一种资源。 资源作为网址，网址中不能有动词只能有名词，一般名词要与数据库的表名对应。而且名词要使用复数。</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">错误示例：</span></div></li><ul><li><div><a href="http://www.example.com/getGoods">http://www.example.com/getGoods</a></div></li><li><div><a href="http://www.example.com/listOrders">http://www.example.com/listOrders</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">正确示例：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#获取单个商品</span></div></li></ul></ul></ul></ul></div><div><ul><ul><ul><li><div><a href="http://www.example.com/app/goods/1" style="font-size: 9pt;">http://www.example.com/app/goods/1</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#获取所有商品</span></div></li><ul><li><div><a href="http://www.example.com/app/goods" style="font-size: 9pt;">http://www.example.com/app/goods</a></div></li></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">四、使用标准的HTTP方法：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">对于资源的具体操作类型，由HTTP动词表示。 常用的HTTP动词有四个。</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">GET SELECT ：从服务器获取资源。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">POST CREATE ：在服务器新建资源。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">PUT UPDATE ：在服务器更新资源。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">DELETE DELETE ：从服务器删除资源。</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">示例：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#获取指定商品的信息</span></div></li><ul><li><div><span style="font-size: 9pt;">GET</span> <a href="http://www.example.com/goods/ID" style="font-size: 9pt;">http://www.example.com/goods/ID</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#新建商品的信息</span></div></li><ul><li><div><span style="font-size: 9pt;">POST</span> <a href="http://www.example.com/goods" style="font-size: 9pt;">http://www.example.com/goods</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#更新指定商品的信息</span></div></li><ul><li><div><span style="font-size: 9pt;">PUT</span> <a href="http://www.example.com/goods/ID" style="font-size: 9pt;">http://www.example.com/goods/ID</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#删除指定商品的信息</span></div></li><ul><li><div><span style="font-size: 9pt;">DELETE</span> <a href="http://www.example.com/goods/ID" style="font-size: 9pt;">http://www.example.com/goods/ID</a></div></li></ul></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">五、过滤信息：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">如果资源数据较多，服务器不能将所有数据一次全部返回给客户端。API应该提供参数，过滤返回结果。 实例：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#指定返回数据的数量</span></div></li><ul><li><div><a href="http://www.example.com/goods?limit=10" style="font-size: 9pt;">http://www.example.com/goods?limit=10</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#指定返回数据的开始位置</span></div></li><ul><li><div><a href="http://www.example.com/goods?offset=10" style="font-size: 9pt;">http://www.example.com/goods?offset=10</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#指定第几页，以及每页数据的数量</span></div></li><ul><li><div><a href="http://www.example.com/goods?page=2&amp;per_page=20" style="font-size: 9pt;">http://www.example.com/goods?page=2&amp;per_page=20</a></div></li></ul></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">六、状态码：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">服务器向用户返回的状态码和提示信息，常用的有：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">200 OK ：服务器成功返回用户请求的数据</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">201 CREATED ：用户新建或修改数据成功。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">202 Accepted：表示请求已进入后台排队。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">400 INVALID REQUEST ：用户发出的请求有错误。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">401 Unauthorized ：用户没有权限。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">403 Forbidden ：访问被禁止。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">404 NOT FOUND ：请求针对的是不存在的记录。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">406 Not Acceptable ：用户请求的的格式不正确。</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">500 INTERNAL SERVER ERROR ：服务器发生错误。</span></div></li></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">七、错误信息：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一般来说，服务器返回的错误信息，以键值对的形式返回。</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">{</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">error: 'Invalid API KEY'</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">}</span></div></li></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">八、响应结果：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">针对不同结果，服务器向客户端返回的结果应符合以下规范。</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#返回商品列表</span></div></li><ul><li><div><span style="font-size: 9pt;">GET</span> <a href="http://www.example.com/goods" style="font-size: 9pt;">http://www.example.com/goods</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#返回单个商品</span></div></li><ul><li><div><span style="font-size: 9pt;">GET</span> <a href="http://www.example.com/goods/cup" style="font-size: 9pt;">http://www.example.com/goods/cup</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#返回新生成的商品</span></div></li><ul><li><div><span style="font-size: 9pt;">POST</span> <a href="http://www.example.com/goods" style="font-size: 9pt;">http://www.example.com/goods</a></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">#返回一个空文档</span></div></li><ul><li><div><span style="font-size: 9pt;">DELETE</span> <a href="http://www.example.com/goods" style="font-size: 9pt;">http://www.example.com/goods</a></div></li></ul></ul></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">九、使用链接关联相关的资源：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">在返回响应结果时提供链接其他API的方法，使客户端很方便的获取相关联的信息。</span></div></li></ul><li><div><span style="line-height: 1.45; font-weight: bold; font-size: 10pt;">十、其他：</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">服务器返回的数据格式，应该尽量使用JSON，避免使用XML。</span></div></li></ul></ul></div><div><br/></div></div><div><br/></div></span>
</div></body></html>