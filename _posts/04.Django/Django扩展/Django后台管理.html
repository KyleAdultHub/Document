---
title: Django-后台管理
date: "2016-11-16 22:00:00"
categories:
- Django
- Django拓展
tags:
- Django
toc: true
---

<html>
<body>
<div>
<span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">Django后台的介绍</span></font></span></div><ul><li><span style="font-size: 9pt;">当我们将数据在网页上展示给用户的时候</span><span style="font-size: 9pt; line-height: 1.45;">是从数据库中查找到新闻的信息，然后把它展示在页面上。</span><span style="font-size: 9pt; line-height: 1.45;">但是我们的网站上的新闻每天都要更新，这就意味着对数据库的增、删、改、查操作，那么我们需要每天写sql语句</span><span style="font-size: 9pt; line-height: 1.45;">操作数据库吗?</span><span style="font-size: 9pt; line-height: 1.45;">如果这样的话，是不是非常繁琐，所以我们可以设计一个页面，通过对这个页面的操作来实现对新闻数据库的增删改</span><span style="font-size: 9pt; line-height: 1.45;">查操作。</span><span style="font-size: 9pt; line-height: 1.45;">Django的后台管理，Django能够根据定义的模型类自动地生成管理页面，可以直接在页面中实现对数据库的增删改查。</span></li></ul><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">Django的基本配置</span></span></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">设置显示界面的语言和事件格式</span></font></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image.png" type="image/png" data-filename="Image.png" width="238"/></span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">创建管理员</span></font></li><ul><li><span style="font-size: 9pt;">创建Django后台管理员命令：python manage.py createsuperuser</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">进入DJango后台的方法</span></font></li><ul><li><span style="font-size: 9pt;">启动Django醒目     python manage.py runserver      </span></li><li><span style="font-size: 9pt;">浏览器进入   127.0.0.1:8000/admin/</span></li></ul></ul></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">注册模型类</span></font></li><ul><li><span style="font-size: 9pt;">作用：</span></li><ul><li><span style="font-size: 9pt;">登录后台管理后，默认没有我们创建的应用中定义的模型类，需要在自己应用中的admin.py文件中注册，才可以在后台管理中看到，并进行增删改查操作。</span></li></ul><li><span style="font-size: 9pt;">方法： 在应用目录下的admin文件中注册表单（只有注册过后才能在后台中显示）</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [1].png" type="image/png" data-filename="Image.png" width="277"/></span></li></ul></ul></ul></div><div> <span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;"> 列表页常见操作(admin) ---通过应用目录下的admin模块进行操作</span></div></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">需要操作的文件</span></font></li><ul><li><span style="font-size: 9pt;">此部分操作是在book_app/admin.py的文件中的自定义类中进行操作的</span></li><li><span style="font-size: 9pt;">需要admin文件配合的功能有：</span><span style="font-size: 9pt; line-height: 1.45;">列表属性展示、数据条目显示、操作选项配置、过滤器、搜索框、字段顺序等</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">定义表单显示的界面</span></font></li><ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">作用：</font></span></li><ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">初始的后台表单只会显示出在模型类中__str__方法返回的字段，如果们想要表显示其他的字段，我们可以自定义后台表显示的字段，并且可以自定义显示的顺序</font></span></li></ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">方法：</font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">在应用目录下的admin文件中创建BookInfoAdmin类（只能通过</span><span style="line-height: 13.600000381469727px;">BookInfoAdmin类来自定义表单格式</span><span style="line-height: 13.600000381469727px;">）</span></font></li><li><font style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [2].png" type="image/png" data-filename="Image.png" width="418"/></font></li><li><font style="font-size: 9pt;">注册模型类的第二种方法</font></li><ul><li><font style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [3].png" type="image/png" data-filename="Image.png" width="318"/></font></li></ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">注意：</font></span></li><ul><li><font style="font-size: 9pt;">列表默认是根据主键id值，从上到下是先大后小，<span style="line-height: 1.45;">点击列表头，会变成从小到大的顺，再点击，就会恢复从大到小的排序了</span></font></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">设置每页显示多少条记录</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">list_per_page=num         （添加类属性）</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">设置每条记录有多少属性</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">list_display=[模型字段1,模型字段2,...]          （修改类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">可以自定义字段的显示顺序，只要表存在该字段</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">编辑&quot; 操作选项&quot; 的位置（就是执行栏）</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">顶部显示的属性             （添加类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">actions_on_top=True</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">设置为True在顶部显示，设置为False不在顶部显示，默认为True</span></li></ul></ul><li><span style="font-size: 9pt; line-height: 1.45;">底部显示的属性              （添加类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">actions_on_bottom=False</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">设置为True在底部显示，设置为False不在底部显示，默认为False</span></li></ul></ul><li><span style="font-size: 9pt;">注意：</span><span style="font-size: 9pt; line-height: 1.45;">这两者都可以设置，表示上下都有操作选项</span></li></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">右边栏过滤器设置</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">list_filter=['字段名']         （添加类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">方括号内只能接收字段，会将对应字段的值列出来，用于快速过滤。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">一般用于有重复值的字段。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">字段值应该使用单引号括住</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">搜索框效果</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">search_fields=['字段名']        （添加类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">用于对指定字段的值进行搜索，支持模糊查询。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">列表类型，表示在这些字段上进行搜索，不进行声明的字段不能进行模糊匹配。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">字段名称两侧使用单引号</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">表的记录详细编辑界面的显示字段      </span></font></li><ul><li><font style="font-size: 9pt;">fields = ['字段3','字段7',...]     （添加类属性）</font></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">默认编辑界面会显示所有可以编辑的字段</font></span></li><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">可以调整显示顺序</font></span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">表的记录详细编辑界面的分组显示</span></font></li><ul><li><span style="font-size: 9pt;">fieldsets =(</span></li><li><span style="font-size: 9pt;">('组1标题',{'fields':['字段1','字段2']}),</span></li><li><span style="font-size: 9pt;">('组2标题',{'fields':['字段3','字段4']}),</span><span style="font-size: 9pt; line-height: 1.45;">)        （添加类属性）</span></li><ul><li><span style="font-size: 9pt;">fields和fieldsets二者只能选一</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">关联对象   （只能在少的一端显示出多端的编辑对象）</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">作用：</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在对表记录的详细信息进行编辑的时候，可以直接对关联表的记录进行编辑</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">设置关联对象以表的形式显示                 （在文件中创建新的类，并添加到类属性中）</span></font></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [4].png" type="image/png" data-filename="Image.png" width="332"/></span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">设置关联对象以块的形式显示</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [5].png" type="image/png" data-filename="Image.png" width="350"/></span></li></ul></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">列表页常见操作(models)</span></font></div></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">操作的文件</span></font></li><ul><li><span style="font-size: 9pt;">此部分的操作，主要是在模型类所在文件book_app/models.py，进行代码的变动</span></li><li><span style="font-size: 9pt;">需要models文件配合的功能有：</span><span style="font-size: 9pt; line-height: 1.45;">列表标题、自定义标题、自定义标题排序、关联对象、中文标题等</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">重命名后台表显示的字段标题</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">（只能设置为英文，默认为类属性名首字母大写）</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例需求：</span></li><ul><li><span style="font-size: 9pt;">将heroinfo列表的Hcomment列表名，更换成&quot;gongfu&quot;</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">方法：                   （添加模型的实例对象方法）</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [6].png" type="image/png" data-filename="Image.png" width="317"/></span></li><ul><li><span style="line-height: 13.600000381469727px;">此方法修改名称后的字段是没有点击后排序功能的，可以通过下边的方法进行设置</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">给方法名标题设置排序功能</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">作用：</span></li><ul><li><span style="font-size: 9pt;">默认情况下，使用模型类方法作为记录的标题，这种情况下，点击标题头是不会排序的，我们可以通过设置来使方法标题名可以进行排序</span></li></ul><li><span style="font-size: 9pt; line-height: 1.45;">设置格式：</span></li><ul><li><span style="font-size: 9pt;">方法名.admin_order_field='模型类字段'               （添加模型类属性）</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在模型类中添加一条类属性</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置方法标题为中文列标题格式</span></font></li><ul><li><span style="font-size: 9pt;">设置格式：</span></li><ul><li><span style="font-size: 9pt;">方法名.short_description='列标题'        （添加模型类属性）</span></li><ul><li><span style="font-size: 9pt;">1、需要先将模型字段封装成方法，</span></li><li><span style="font-size: 9pt;">2、再对方法使用这个属性</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">关联对象（一对多关系举例，在多的一边进行设置）</span></font></li><ul><li><span style="line-height: 15.199999809265137px;">作用</span></li><ul><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">如果不设置关联对象，将不能对关联的对象进行编辑，只能显示出来关联的对象</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">设置方法：                 (添加模型类的实例方法)</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [7].png" type="image/png" data-filename="Image.png" width="403"/></span></li><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [8].png" type="image/png" data-filename="Image.png" width="398"/></span></li><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [9].png" type="image/png" data-filename="Image.png" width="424"/></span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">设置中文标题</span></font></li><ul><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">设置方法         （添加模型类的实例属性）</span></li></ul></ul><div>                            <img src="/e_img/Django后台管理_files/Image [10].png" type="image/png" data-filename="Image.png" style="font-size: 9pt; line-height: 1.45;" width="394"/></div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">重写模板操作</span></font></span></div><div><ul><li><span style="font-size: 9pt;">作用：</span></li><ul><li><span style="font-size: 9pt;">我们可以重写Django后台的父模板，来让django可以按照我们想要的模板进行显示</span></li></ul><li><span style="font-size: 9pt;">步骤</span></li><ul><li><span style="font-size: 9pt;">1、在templates模板目录中创建一个admin的目录</span></li><li><span style="font-size: 9pt;">2、查找Django默认的模板基础目录</span></li><li><span style="font-size: 9pt;">3、复制到我们创建的admin目录里</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Django后台管理_files/Image [11].png" type="image/png" data-filename="Image.png"/></span></li><li><span style="font-size: 9pt;">3、复制到我们创建的admin目录里</span></li><li><span style="font-size: 9pt;">4、对模板文件进行更改</span></li></ul></ul></div><div><br/></div></span>
</div></body></html>