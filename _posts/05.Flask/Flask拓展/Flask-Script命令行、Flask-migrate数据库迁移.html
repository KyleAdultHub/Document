---
title: Flask-Script命令行、migrate数据库迁移
date: "2017-08-06 22:00:00"
categories:
- Flask
- Flask拓展
tags:
- Flask
toc: true
---

<html>
<body>
<div>
<span><div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">Flask-Script扩展命令行</span></font></span></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">Flask-Script的作用</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">可以实现在终端中使用命令行的方式对项目进行操作</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">Flask-Script的配置</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在程序中导入拓展</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">from flask_script import Manager</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">创建manager实例</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">manager = Manager(app)    app为已经创建好的flask应用实例</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">运行manager实例</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">manager.run( )</span></li></ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">查看所有</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">Flask-Script扩展命令</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">python 文件名 runserver --help</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">代码示例</span></font></li></ul></div><div><ul><li><span style="line-height: 13.600000381469727px;"> </span><img src="/e_img/e_img/Flask-Script命令行、Flask-migrate数据库迁移_files/Image.png" type="image/png" data-filename="Image.png" style="line-height: 13.600000381469727px; font-size: 9pt;" width="196"/></li></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">--启动服务器</span></font></div></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">通过在终端中使用命令启动</span></font></li><ul><li><span style="font-size: 9pt;">python hello.py runserver </span><span style="font-size: 9pt; line-height: 1.45;"> (</span><span style="font-size: 9pt; line-height: 1.45;">-host  </span><span style="font-size: 9pt; line-height: 1.45;">ip地址</span><span style="font-size: 9pt; line-height: 1.45;">)        设置服务器在哪个机器的端口上监听客户端请求</span></li></ul></ul><div><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="color: rgb(50, 135, 18); font-size: 14pt; background-color: rgb(255, 250, 165); line-height: 13.600000381469727px; font-weight: bold;-evernote-highlight:true;">--数据库的迁移</span></span></font></div></div><ul><li><span style="line-height: 1.45; font-weight: bold;">迁移初始化</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">python 文件 db init </span></li></ul><li><span style="line-height: 1.45; font-weight: bold;">生成迁移文件</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">python 文件 db migrate -m&quot;版本名(注释)&quot;</span></li></ul><li><span style="line-height: 1.45; font-weight: bold;">数据库更新</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">python 文件 db upgrade</span></li></ul><li><span style="line-height: 1.45; font-weight: bold;">查看历史迁移记录</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">python 文件 db history</span></li></ul><li><span style="line-height: 1.45; font-weight: bold;">进行数据库迁移版本回退</span></li><ul><li><span style="line-height: 1.45; font-size: 9pt;">python 文件 db downgrade(upgrade) 版本号</span></li></ul></ul><div><br/></div></div><div><br/></div></span>
</div></body></html>