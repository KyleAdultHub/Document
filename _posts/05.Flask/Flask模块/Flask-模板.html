---
title: Django-Model
date: "2017-08-01 22:00:00"
categories:
- Flask
- Flask拓展
tags:
- Flask
toc: true
---

<html>
<head>
  <title>Flask-模板</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="561"/>
<h1>Flask-模板</h1>

<div>
<span><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">模板的介绍</span></span></div><div><ul><li><span style="font-size: 10pt; font-weight: bold;">Flask模板的作用</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">处理业务逻辑和返回响应内容。在大型应用中，把业务逻辑和表现内容放在一起，会增加代码的复杂度和维护成本。</span></li><li><span style="font-size: 9pt; line-height: 1.45;">模板的作用即是承担视图函数的另一个作用，即返回响应内容。 </span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">模板渲染的介绍</span></li><ul><li><span style="font-size: 9pt;">模板其实是一个包含响应文本的文件，其中用占位符(变量)表示动态部分，告诉模板引擎其具体的值需要从使用的数据中获取</span></li><li><span style="font-size: 9pt;">使用真实值替换变量，再返回最终得到的字符串，这个过程称为“渲染”</span></li><li><span style="font-size: 9pt;">Flask是使用 Jinja2 这个模板引擎来渲染模板</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">渲染模板的函数</span></li><ul><li><span style="font-size: 9pt;">Flask提供的 render_template 函数封装了该模板引擎</span></li><li><span style="font-size: 9pt;">render_template 函数的第一个参数是模板的文件名，后面的参数都是键值对，表示模板中变量对应的真实值。</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">使用模板的好处</span></li><ul><li><span style="font-size: 9pt;">视图函数只负责业务逻辑和数据处理(业务逻辑方面)</span></li><li><span style="font-size: 9pt;">而模板则取到视图函数的数据结果进行展示(视图展示方面)</span></li><li><span style="font-size: 9pt;">代码结构清晰，耦合度低</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">Jinja2与模板语言的概念</span></li><ul><li><span style="font-size: 9pt;">Jinja2：是 Python 下一个被广泛应用的模板引擎，是由Python实现的模板语言，他的设计思想来源于 Django 的模板引擎，并扩展了其语法和一系列强大的功能，其是Flask内置的模板语言。</span></li><li><span style="font-size: 9pt;">模板语言：是一种被设计来自动生成文档的简单文本格式，在模板语言中，一般都会把一些变量传给模板，替换模板的特定位置上预先定义好的占位变量名。</span></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">模板-变量</span></span></div></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">模板中变量介绍</span></li><ul><li><span style="font-size: 9pt;">在模板中{{ variable }}结构表示变量，是一种特殊的占位符，告诉模板引擎这个位置的值，从渲染模板时使用的数据中获取；Jinja2除了能识别基本类型的变量，还能识别{}；</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">变量的表示方法</span></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">变量使用格式</span></li><ul><li><span style="font-size: 9pt;">{{ variable }}   变量代码块</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">代码块中的变量可以是任意python类型</span></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">过滤器</span></span></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">什么式过滤器</span></li><ul><li><span style="font-size: 9pt;">过滤器的本质就是函数。有时候我们不仅仅只是需要输出变量的值，我们还需要修改变量的显示，甚至格式化、运算等等，而在模板中是不能直接调用 Python 中的某些方法，那么这就用到了过滤器。</span></li></ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">使用方式</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">过滤器的使用方式为</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">调用过滤器方法</span></li><ul><li><span style="font-size: 9pt;">带参数的过滤器：变量名 | 过滤器(参数)</span></li><ul><li><span style="font-size: 9pt;">{{variable | filter_name(*args)}}    参数可以是多个，用逗号隔开</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">不需要传递参数的过滤器：变量名| 过滤器</span></li><ul><li><span style="font-size: 9pt;">{{variable | filter_name}}</span></li></ul></ul><li><span style="font-size: 9pt;">链式调用过滤器的方法</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{{ &quot;hello world&quot; | reverse | upper }}</span></li></ul></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">jinja2常见内建过滤器</span></li><ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">字符串操作</span></span></li><ul><li><span style="font-size: 9pt;">safe：禁用转义</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ '&lt;em&gt;hello&lt;/em&gt;' | safe }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">capitalize：   把变量值的首字母转成大写，其余字母转小写</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'hello' | capitalize }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">lower：把值转成小写</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'HELLO' | lower }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">upper：把值转成大写</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'hello' | upper }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">title：把值中的每个单词的首字母都转成大写</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'hello' | title }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">reverse：字符串反转</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'olleh' | reverse }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">format：格式化输出</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ '%s is %d' | format('name',17) }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">striptags：渲染之前把值中所有的HTML标签都删掉</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ '&lt;em&gt;hello&lt;/em&gt;' | striptags }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">truncate: 字符串截断</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ 'hello every one' | truncate(9)}}&lt;/p&gt;</span></li></ul></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">列表操作</span></span></li><ul><li><span style="font-size: 9pt;">first：取第一个元素</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ [1,2,3,4,5,6] | first }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">last：取最后一个元素</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ [1,2,3,4,5,6] | last }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">length：获取列表长度</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ [1,2,3,4,5,6] | length }}&lt;/p&gt;</span></li></ul><li><span style="font-size: 9pt;">sum：列表求和</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ [1,2,3,4,5,6] | sum }}&lt;/p&gt;    列表求和</span></li><li><span style="font-size: 9pt;">&lt;p&gt;{{  [{'name': 18}, {'name': 20}] | sum('name') }}&lt;/p&gt;     列表嵌套字典字段求和</span></li></ul><li><span style="font-size: 9pt;">sort：列表排序</span></li><ul><li><span style="font-size: 9pt;">&lt;p&gt;{{ [6,2,3,1,5,4] | sort }}&lt;/p&gt;</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">自定义过滤器</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-weight: bold; line-height: 13.600000381469727px;">定义方式</span></font></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">定义过滤器函数(已do_lireverse自定义过滤器来举例)</font></span></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">def do_lireverse(li)</font></span></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">l = list(li)</font></span></li><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">l.reverse()</span></font></li><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">return l</font></span></li></ul></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">注册过滤器函数</font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">方式一：</span><span style="line-height: 13.600000381469727px;">通过装饰器来注册自定义过滤器,在装饰的时候指定装饰器的名字</span></font></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">@ app.template_filter('lireverse')</font></span></li></ul><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">方式二：直接将过滤器添加到过滤器列表中</span></font></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">app.add_template_filter(do_lireverse, 'li_reverse')</font></span></li></ul></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">控制代码块</span></span></div></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">if语句</span></li><ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">if语句作用</span></font></li><ul><li><span style="font-size: 9pt;">Jinja2 语法中的if语句跟 Python 中的 if 语句相似,后面的布尔值或返回布尔值的表达式将决定代码中的哪个流程会被执行</span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">代码示例</span></span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image.png" type="image/png" data-filename="Image.png" width="264"/></span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">循环语句  for</span></li><ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">for 语句作用</span></font></li><ul><li><span style="font-size: 9pt;">我们可以在 Jinja2 中使用循环来迭代任何列表或者生成器函数</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">for语句的使用</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">普通的for循环代码块</span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [1].png" type="image/png" data-filename="Image.png" width="217"/></span></li></ul><li><span style="font-size: 9pt;">循环语句结合if语句</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">作用</span></li><ul><li><span style="font-size: 9pt;">循环和if语句可以组合使用，以模拟 Python 循环中的 continue 功能</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">代码示例</span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [2].png" type="image/png" data-filename="Image.png" width="201"/></span></li></ul></ul></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">在循环语句中可以访问的变量</span></span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">访问方式</span></li><ul><li><span style="font-size: 9pt;">在循环内部,你可以使用一个叫做loop的特殊变量来获得关于for循环的一些信息</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">所有loop变量</span></li><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [3].png" type="image/png" data-filename="Image.png" width="342"/></span></li><li><span style="font-size: 9pt;">loop.cycle的使用</span></li><ul><li><span style="font-size: 9pt;">使用cycle函数会在每次遍历输出变量的时候，给其添加一个前置变量</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{%</span> <span style="font-size: 9pt; line-height: 1.45;">for</span><span style="font-size: 9pt; line-height: 1.45;"> my in my_list</span><span style="font-size: 9pt; line-height: 1.45;">%}</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">{{loop.cycle(</span><span style="font-size: 9pt; line-height: 1.45;">'a'</span><span style="font-size: 9pt; line-height: 1.45;">,</span><span style="font-size: 9pt; line-height: 1.45;">'b','c'</span><span style="font-size: 9pt; line-height: 1.45;">)}}  -----   {{ my }}</span></font></li></ul><li><span style="font-size: 9pt; line-height: 1.45;">{% endfor %}</span></li></ul></ul></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">循环内容之间的空格问题</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">现象</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">在使用循环遍历变量中的内容的时候，且每次遍历的内容不换行，在浏览器中显示的内容之间会有空格</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">解决办法</span></li><ul><li><span style="font-size: 9pt;">可以在循环的开始和结束位置放置一个 - 号去除for循环不换行情况下产生的空格</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">代码示例</span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-weight: bold;" width="191"/></span></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">宏的使用</span></span></div></div><div><ul><li><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">什么是宏</span></li><ul><li><span style="font-size: 9pt;">把它看作 Jinja2 中的一个函数，它会返回一个模板或者HTML字符串</span></li><li><span style="font-size: 9pt;">为了避免反复地编写同样的模板代码，出现代码冗余，可以把他们写成函数以进行重用</span></li><li><span style="font-size: 9pt;">需要在多处重复使用的模板代码片段可以写入单独的文件，再包含在所有模板中，以避免重复</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">使用方法</span></li><ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">定义宏（类似于python函数的定义）</span></span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [5].png" type="image/png" data-filename="Image.png" width="280"/></span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">调用宏（类似于python函数的调用）</span></span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [6].png" type="image/png" data-filename="Image.png" width="220"/></span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">宏的封装</span></li><ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">宏的封装</span></span></li><ul><li><span style="font-size: 9pt;">把宏单独抽取出来，封装成html文件，其它模板中导入使用，文件名可以自定义macro.html</span></li><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [7].png" type="image/png" data-filename="Image.png" width="275"/></span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">宏的调用</span></span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [8].png" type="image/png" data-filename="Image.png" width="219"/></span></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">模板的继承和包含</span></span></div></div><div><ul><li><span style="font-size: 10pt; font-weight: bold;">模板的继承</span></li><ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">模板继承的作用</span></span></li><ul><li><span style="font-size: 9pt;">模板继承是为了重用模板中的公共内容。一般Web开发中，继承主要使用在网站的顶部菜单、底部。这些内容可以定义在父模板中，子模板直接继承，而不需要重复书写。</span></li><li><span style="font-size: 9pt;">相当于在父模板中挖个坑，当子模板继承父模板时，可以进行填充。</span></li><li><span style="font-size: 9pt;">子模板使用extends指令声明这个模板继承自哪个模板</span></li><li><span style="font-size: 9pt;">父模板中定义的块在子模板中被重新定义，在子模板中调用父模板的内容可以使用super()</span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">父模板</span></span></li><ul><li><span style="font-size: 9pt;">父模板的定义</span></li><ul><li><span style="font-size: 9pt;">如果发现在多个子模板中重复使用了同一段代码， 那就应该把这段重复的内容定义到父模板中， 怎么定义到父模板中，就是使用block标签。</span></li></ul><li><span style="font-size: 9pt;">父模板的内容：</span></li><ul><li><span style="font-size: 9pt;">{% block '区域名' %} </span></li><li><span style="font-size: 9pt;">... </span></li><li><span style="font-size: 9pt; line-height: 1.45;">{% endblock '区域名' %}   </span></li></ul><li><span style="font-size: 9pt;">示例：</span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [9].png" type="image/png" data-filename="Image.png" width="330"/></span></li></ul></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">子模板</span></span></li><ul><li><span style="font-size: 9pt;">子模板的定义</span></li><ul><li><span style="font-size: 9pt;">引入父模板，在父模板的框架中添加内容，在父模板的基础上进行模板文件的设计</span></li></ul><li><span style="font-size: 9pt;">子模板的首行：</span></li><ul><li><span style="font-size: 9pt;">首行一定是要导入的模板文件</span></li><ul><li><span style="font-size: 9pt;">{% extends '父模板文件名' %}</span></li></ul></ul><li><span style="font-size: 9pt;">子模板的内容：</span></li><ul><li><span style="font-size: 9pt;">替换父模板中的block区域内容</span></li><ul><li><span style="font-size: 9pt;">{% block '父模板区域名' %} </span></li><li><span style="font-size: 9pt;">... </span></li><li><span style="font-size: 9pt;">{% endblock 父模板区域名 %}</span></li></ul><li><span style="font-size: 9pt;">在子模板中引用父模板中的内容</span></li><ul><li><span style="font-size: 9pt;">{{ super( ) }}</span></li></ul></ul><li><span style="font-size: 9pt;">示例：</span></li><ul><li><span style="font-size: 9pt;"><img src="Flask-模板_files/Image [10].png" type="image/png" data-filename="Image.png" width="264"/></span></li></ul></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用继承时候的注意点</span></span></li><ul><li><span style="font-size: 9pt;">不支持多继承</span></li><li><span style="font-size: 9pt;">为了便于阅读，在子模板中使用extends时，尽量写在模板的第一行。</span></li><li><span style="font-size: 9pt;">不能在一个模板文件中定义多个相同名字的block标签。</span></li><li><span style="font-size: 9pt;">当在页面中使用多个block标签时，建议给结束标签起个名字，当多个block嵌套时，阅读性更好。</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">模板的包含</span></li><ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">作用</span></span></li><ul><li><span style="font-size: 9pt;">它的功能是将另一个模板整个加载到当前模板中，并直接渲染。</span></li></ul><li><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.600000381469727px;">模板导入的方法</span></span></li><ul><li><span style="font-size: 9pt;">{% include 'hello.html' %}</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.600000381469727px;">模板不存在异常</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">现象描述</span></font></li><ul><li><span style="font-size: 9pt;">包含在使用时，如果包含的模板文件不存在时，程序会抛出TemplateNotFound异常</span></li></ul><li><span style="font-size: 9pt; line-height: 1.45;">解决办法</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">include的使用的时候</span><span style="font-size: 9pt; line-height: 1.45;">可以加上ignore missing 关键字。如果包含的模板文件不存在，会忽略这条include语句。</span></font></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">代码示例</span></li><ul><li><span style="font-size: 9pt;">{% include 'hello.html' ignore missing %}</span></li></ul></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">宏、继承、包含的总结</span></li><ul><li><span style="font-size: 9pt;">宏(Macro)、继承(Block)、包含(include)均能实现代码的复用。</span></li><li><span style="font-size: 9pt;">继承(Block)的本质是代码替换，一般用来实现多个页面中重复不变的区域。</span></li><li><span style="font-size: 9pt;">宏(Macro)的功能类似函数，可以传入参数，需要定义、调用。</span></li><li><span style="font-size: 9pt;">包含(include)是直接将目标模板文件整个渲染出来。</span></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">模板中特有的变量</span></span></div></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">特有变量</span></font></li><ul><li><span style="font-size: 9pt;">你可以在自己的模板中访问一些Flask默认内置的函数和对象</span></li></ul><li><span style="font-size: 10pt; font-weight: bold;">config</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">可以从模板中直接访问Flask当前的config对象</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{{ config.SQLALCHEMY_DATABASE_URI }}</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">request</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">就是flask中代表当前请求的request对象：</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{{ request.url }}</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">session</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">为Flask的session对象</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{{ session.new }}</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">g 变量</span></font></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">是单次请求的全局变量</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">{{ g.name ]}</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">url_for()</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">url_for()函数可以通过传入的函数名,解析对应的请求路径:</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">&lt;a href='{{ url_for('index') }}'&gt; 'back' &lt;/a&gt;</span></font></li></ul><li><span style="font-size: 9pt; line-height: 1.45;">url_for()函数可以通过传入的函数名,解析对应的请求路径(当视图函数需要传递参数):</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">&lt;a href='{{ url_for('index'， param1) }}'&gt; 'back' &lt;/a&gt;</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">get_flashed_messages()</span></li><ul><li><span style="font-size: 9pt; font-weight: bold; line-height: 15.199999809265137px;">在视图函数中使用</span></li><ul><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">flash()   向消息队列中添加一条消息</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 15.199999809265137px;">在模板中使用</span></font></li><ul><li><span style="font-size: 9pt;">get_flashed_messages()    </span><span style="font-size: 9pt; line-height: 15.199999809265137px;">从消息列队中将消息都取出来于一个列表中，并消费掉</span></li></ul><li><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 15.199999809265137px;">模板中使用代码示例</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{% </span><span style="font-size: 9pt; line-height: 1.45;">for</span> <span style="font-size: 9pt; line-height: 1.45;">message</span> <span style="font-size: 9pt; line-height: 1.45;">in</span> <span style="font-size: 9pt; line-height: 1.45;">get_flashed_messages() %}</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">{{ message }}</span></li></ul><li><span style="font-size: 9pt; line-height: 1.45;">{% endfor %}</span></li></ul></ul></ul></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">注释</span></span></div><div><ul><li><span style="font-size: 9pt;">使用 {# #} 进行注释，注释的内容不会在html中被渲染出来</span></li><ul><li><span style="font-size: 9pt;">{# {{ name }} #}</span></li></ul></ul></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 