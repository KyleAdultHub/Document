---
title: 情感分析-文本情感分析
date: "2018-05-23 20:00:00"
categories:
- 机器学习
- 自然语言处理
tags:
- 机器学习
- 自然语言处理
toc: true
typora-root-url: ..\..\..
---

<html>
<body>
<div>
<span><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">对文本进行情感分析的流程</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">导入模块(</span><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">NaiveBayesClassifier</span><span style="font-size: 10pt; font-weight: bold;">)</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">import</span> <span style="font-size: 9pt; line-height: 1.45;">nltk</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">from</span> <span style="font-size: 9pt; line-height: 1.45;">nltk.stem</span> <span style="font-size: 9pt; line-height: 1.45;">import</span> <span style="font-size: 9pt; line-height: 1.45;">WordNetLemmatizer</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">from</span> <span style="font-size: 9pt; line-height: 1.45;">nltk.corpus</span> <span style="font-size: 9pt; line-height: 1.45;">import</span> <span style="font-size: 9pt; line-height: 1.45;">stopwords</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">from</span> <span style="font-size: 9pt; line-height: 1.45;">nltk.classify</span> <span style="font-size: 9pt; line-height: 1.45;">import</span> <span style="font-size: 9pt; line-height: 1.45;">NaiveBayesClassifier    导入nltk 中的朴素贝叶斯</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">定义文本处理的方法</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">def</span> <span style="font-size: 9pt; line-height: 1.45;">proc_text</span><span style="font-size: 9pt; line-height: 1.45;">(text)</span><span style="font-size: 9pt; line-height: 1.45;">:</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">raw_words = nltk.word_tokenize(text)    #  对文本进行分词处理</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">wordnet_lematizer = WordNetLemmatizer()     # 对文本进行归一化处理</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">words = [wordnet_lematizer.lemmatize(raw_word)</span> <span style="font-size: 9pt; line-height: 1.45;">for</span> <span style="font-size: 9pt; line-height: 1.45;">raw_word</span> <span style="font-size: 9pt; line-height: 1.45;">in</span> <span style="font-size: 9pt; line-height: 1.45;">raw_words]    # 对文本进行归一化处理</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">filtered_words = [word</span> <span style="font-size: 9pt; line-height: 1.45;">for</span> <span style="font-size: 9pt; line-height: 1.45;">word</span> <span style="font-size: 9pt; line-height: 1.45;">in</span> <span style="font-size: 9pt; line-height: 1.45;">words</span> <span style="font-size: 9pt; line-height: 1.45;">if</span> <span style="font-size: 9pt; line-height: 1.45;">word</span> <span style="font-size: 9pt; line-height: 1.45;">not</span> <span style="font-size: 9pt; line-height: 1.45;">in</span> <span style="font-size: 9pt; line-height: 1.45;">stopwords.words(</span><span style="font-size: 9pt; line-height: 1.45;">'english'</span><span style="font-size: 9pt; line-height: 1.45;">)]   # 去处停用词</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;"># 将用来学习的单词，构建成一个字典，键是每个词，值是True/False，True代表该词在文本中</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">return</span> <span style="font-size: 9pt; line-height: 1.45;">{word:</span> <span style="font-size: 9pt; line-height: 1.45;">True</span> <span style="font-size: 9pt; line-height: 1.45;">for</span> <span style="font-size: 9pt; line-height: 1.45;">word</span> <span style="font-size: 9pt; line-height: 1.45;">in</span> <span style="font-size: 9pt; line-height: 1.45;">filtered_words}    返回训练样本</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">对模型进行学习和测试</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">if</span> <span style="font-size: 9pt; line-height: 1.45;">__name__ ==</span> <span style="font-size: 9pt; line-height: 1.45;">&quot;__main__&quot;</span><span style="font-size: 9pt; line-height: 1.45;">:</span></div></li><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">构造5个用来学习的句子</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">text1 =</span> <span style="font-size: 9pt; line-height: 1.45;">'I like the movie so much!'</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">text2 =</span> <span style="font-size: 9pt; line-height: 1.45;">'That is a good movie.'</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">text3 =</span> <span style="font-size: 9pt; line-height: 1.45;">'This is a great one.'</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">text4 =</span> <span style="font-size: 9pt; line-height: 1.45;">'That is a really bad movie.'</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">text5 =</span> <span style="font-size: 9pt; line-height: 1.45;">'This is a terrible movie.'</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">构造训练样本：是由每一个句子的词构成的字典和句子所对应的分数（情感值），构建成的列表</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">train_data = [[</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">proc_text(text1),</span> <span style="font-size: 9pt; line-height: 1.45;">1</span><span style="font-size: 9pt; line-height: 1.45;">],</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">[proc_text(text2),</span> <span style="font-size: 9pt; line-height: 1.45;">1</span><span style="font-size: 9pt; line-height: 1.45;">],</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">[proc_text(text3),</span> <span style="font-size: 9pt; line-height: 1.45;">1</span><span style="font-size: 9pt; line-height: 1.45;">],</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">[proc_text(text4),</span> <span style="font-size: 9pt; line-height: 1.45;">0</span><span style="font-size: 9pt; line-height: 1.45;">],</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">[proc_text(text5),</span> <span style="font-size: 9pt; line-height: 1.45;">0</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">]]</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">使用朴素贝叶斯模型训练（默认会将文本数据向量化处理），返回贝叶斯模型</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">nb_model = NaiveBayesClassifier.train(train_data)</span></div></li></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 1.45;">测试模型</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">text6 =</span> <span style="font-size: 9pt; line-height: 1.45;">'That is a bad one.'       # 测试文本</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">text7 =</span> <span style="font-size: 9pt; line-height: 1.45;">'That is a good one!'         # </span><span style="font-size: 9pt; line-height: 1.45;">测试文本</span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">nb_model.classify(proc_text(text6))  ---&gt;0    对测试文本进行测试并打分</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">nb_model.classify(proc_text(text7))  ---&gt;1      </span><span style="font-size: 9pt; line-height: 1.45;">对测试文本进行测试并打分</span></font></div></li></ul></ul></ul></div><div><br/></div></span>
</div></body></html>