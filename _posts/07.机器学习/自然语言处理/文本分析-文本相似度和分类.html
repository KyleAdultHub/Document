---
title: 文本分析-文本相似度和分类
date: "2018-05-25 20:00:00"
categories:
- 机器学习
- 自然语言处理
tags:
- 机器学习
- 自然语言处理
toc: true
typora-root-url: ..\..\..
---

<html>
<body>
<div>
<span><div><span style="line-height: 13.600000381469727px; background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b>文本相似度<span style="line-height: 13.600000381469727px; color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;">（词频统计）</span>的流程</b></font></span></div><div><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>实现流程的简介</b></font></span></li><ul><li><font style="font-size: 9pt;">度量文本间的相似性</font></li><li><font style="font-size: 9pt;">使用词频表示文本特征</font></li><li><font style="font-size: 9pt;">文本中单词出现的频率或次数</font></li><li><font style="font-size: 9pt;">NLTK实现词频统计</font></li></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>文本相似度分析的流程</b></font></span></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;"><b>导入模块</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">import</span> <span style="line-height: 1.45;">nltk</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">from</span> <span style="line-height: 1.45;">nltk</span> <span style="line-height: 1.45;">import</span> <span style="line-height: 1.45;">FreqDist      # 导入词频统计模块<span style="font-size: 9pt; line-height: 1.45;">FreqDist</span></span></font></li></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>先定义进行分析的几个文本</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">text1 =</span> <span style="line-height: 1.45;">'I like the movie so much '</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">text2 =</span> <span style="line-height: 1.45;">'That is a good movie '</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">text3 =</span> <span style="line-height: 1.45;">'This is a great one '</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">text4 =</span> <span style="line-height: 1.45;">'That is a really bad movie '</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">text5 =</span> <span style="line-height: 1.45;">'This is a terrible movie'</span></font></li></ul><li><font style="font-size: 10pt;"><span style="line-height: 13.600000381469727px;"><b>定义取出词频最好的n个单词的方法（词频统计方法）</b></span></font></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">def get_most_common_words(n, *args):</span></font></li><ul><li><font style="font-size: 9pt;">&quot;&quot;&quot;将文本内容汇总，并获取统计每个单词的词频的列表&quot;&quot;&quot;</font></li><li><font style="font-size: 9pt;">text = [text for text in args]</font></li><li><font style="font-size: 9pt;">text = ''.join(text)</font></li><li><font style="font-size: 9pt;">words = nltk.word_tokenize(text)   # 对文本进行分词处理</font></li><li><font style="font-size: 9pt;">freq_dist = FreqDist(words)     # 1.生成每个单词的词频统计结果,生成词频统计对象</font></li><li><font style="font-size: 9pt;">most_common_words = freq_dist.most_common(n)    # 2.取出最高频率的n个单词，返回列表</font></li><li><font style="font-size: 9pt;">return  most_common_words    # 输出类似：[('a', 4), ('movie', 4), ('is', 4), ('This', 2), ('That', 2)]</font></li></ul></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>定义查找单词所在位置的方法</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">def</span> <span style="line-height: 1.45;">lookup_pos</span><span style="line-height: 1.45;">(most_common_words)</span><span style="line-height: 1.45;">:</span></font></li><ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">result = {}    # 事先设置好存储常用单词的字典</font></span></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">pos =</span> <span style="line-height: 1.45;">0    # 表示常用单词的位置</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">for</span> <span style="line-height: 1.45;">word</span> <span style="line-height: 1.45;">in</span><span style="line-height: 1.45;"> get_most_common_words:</span></font></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">result[word[</span><span style="line-height: 1.45;">0</span><span style="line-height: 1.45;">]] = pos</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">pos +=</span> <span style="line-height: 1.45;">1</span></font></li></ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">return</span> <span style="line-height: 1.45;">result     # 返回数据类似：{'movie': 0, 'is': 1, 'a': 2, 'That': 3, 'This': 4}</span></font></li></ul></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>获取词频统计的结果列表</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 13.600000381469727px;">most_common_words = </span><span style="line-height: 13.600000381469727px;">get_most_common_words(5, text1, text2, text3, text4, text5)</span></font></li></ul><li><span style="line-height: 1.45;"><font style="font-size: 10pt;"><b>记录常用单词的位置，用来进行相似度的判断</b></font></span></li><ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;">std_pos_dict = lookup_pos(most_common_words)</font></span></li></ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>计算新文本常用词的词频分别为多少</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">new_text =</span> <span style="line-height: 1.45;">'That one is a good movie. This is so good!'    # 定义新文本</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">freq_vec = [</span><span style="line-height: 1.45;">0</span><span style="line-height: 1.45;">] * n     </span><span style="line-height: 1.45;"># 初始化向量，用来存储常用词的词频</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">new_words = nltk.word_tokenize(new_text)    </span><span style="line-height: 1.45;"># 分词处理</span></font></li></ul><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"></blockquote><li><span style="line-height: 1.45;"><font style="font-size: 10pt;"><b>在“常用单词列表”上计算词频，当出现常用词频时，统计一次</b></font></span></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">for</span> <span style="line-height: 1.45;">new_word</span> <span style="line-height: 1.45;">in</span> <span style="line-height: 1.45;">new_words:</span></font></li><ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">if</span> <span style="line-height: 1.45;">new_word</span> <span style="line-height: 1.45;">in</span> <span style="line-height: 1.45;">list(std_pos_dict.keys()):</span></font></li><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">freq_vec[std_pos_dict[new_word]] +=</span> <span style="line-height: 1.45;">1</span></font></li></ul><li><font style="font-size: 9pt;"><span style="line-height: 1.45;">print(freq_vec) ---&gt;</span><span style="box-sizing: border-box; line-height: 1.45;"> [1, 2, 1, 1, 1]</span></font></li></ul></ul></ul></div><div><div><font style="color: rgb(50, 135, 18); font-size: 14pt;"><b style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">文本分类的分析方法</b></font></div><ul><li><font style="font-size: 10pt;"><span style="line-height: 1.45;"><b>TF-IDF （词频-逆文档频率）介绍</b></span></font></li><ul><li><span style="line-height: 1.45;"><font style="font-size: 9pt;"><b>TF-IDF的作用</b></font></span></li><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 9pt;">用来描述一个单词对一篇文章的重要程度</font></span></li></ul><li><font style="font-size: 9pt;"><b>TF, Term Frequency（词频）</b></font></li><ul><li><font style="font-size: 9pt;">表示某个词在该文件中出现的次数</font></li><li><img src="/e_img/文本分析-文本相似度和分类_files/Image.png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="214"/></li></ul><li><font style="font-size: 9pt;"><b>IDF，Inverse Document Frequency（逆文档频率）</b></font></li><ul><li><font style="font-size: 9pt;">用于衡量某个词普 遍的重要性。</font></li><li><img src="/e_img/文本分析-文本相似度和分类_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-size: 9pt;" width="194"/></li></ul><li><font style="font-size: 9pt;"><b><span style="line-height: 1.45;">TF-IDF</span><span style="line-height: 1.45;">（词频-逆文档频率)</span></b></font></li><ul><li><font style="font-size: 9pt;">TF-IDF = TF * IDF   用来统计个单词对于一篇文章的重要程度</font></li></ul></ul></ul></div><div><ul><li><span style="line-height: 13.600000381469727px;"><font style="font-size: 10pt;"><b>代码示例</b></font></span></li><ul><li><font style="font-size: 9pt;"><img src="/e_img/文本分析-文本相似度和分类_files/Image [2].png" type="image/png" data-filename="Image.png" width="322"/></font></li></ul><blockquote><div><font style="font-size: 9pt;"><br/></font></div><div><font style="font-size: 9pt;"><br/></font></div></blockquote></ul></div><div><font style="font-size: 9pt;"><br/></font></div><div><br/></div></span>
</div></body></html>