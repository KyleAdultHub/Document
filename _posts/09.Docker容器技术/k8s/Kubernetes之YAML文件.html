---
title: Kubernetes之YAML文件
date: "2018-10-23 23:00:00"
categories:
- Docker容器技术
- k8s
tags:
- Docker
- k8s
toc: true
---

<html>
<body>
<div>
<span><div><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">YAML 基础介绍</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">YAML概念</span></font></div></li><ul><li><div><span style="font-size: 9pt;">YAML是专门用来写配置文件的语言，非常简洁和强大，使用比json更方便。它实质上是一种通用的数据串行化格式。</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">YAML语法规则</span></font></div></li><ul><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">大小写敏感</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">使用缩进表示层级关系</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">缩进时不允许使用Tal键，只允许使用空格</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">”#” 表示注释，从这个字符一直到行尾，都会被解析器忽略</span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="color: rgb(79, 79, 79); font-size: 12pt; font-weight: bold;">在Kubernetes中，只需要知道两种结构类型即可</span></font></div></li><ul><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">Lists</span></div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;">Maps</span></div></li></ul><li><div><font style="font-size: 12pt;"><b>Kubernetes中文文档地址</b></font></div></li><ul><li><div><span style="font-size: 9pt; color: rgb(79, 79, 79);"><a href="https://www.kubernetes.org.cn/docs" style="font-size: 9pt; color: rgb(79, 79, 79);">https://www.kubernetes.org.cn/docs</a></span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用YAML创建Pod</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="color: rgb(79, 79, 79); font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div>示例一</div></li><li><div><span style="color: rgb(79, 79, 79); font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image.png" type="image/png" data-filename="Image.png" style="color: rgb(79, 79, 79);" width="458"/></span></div></li><li><div><span style="font-size: 12px; color: rgb(79, 79, 79);">privileged模式启动</span></div></li><li><div><img src="/e_img/Kubernetes之YAML文件_files/Image [1].png" type="image/png" data-filename="Image.png" width="402"/></div></li><li><div>用host模式启动</div></li><li><div><img src="/e_img/Kubernetes之YAML文件_files/Image [2].png" type="image/png" data-filename="Image.png" width="339"/></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">apiVersion：此处值是v1，这个版本号需要根据安装的Kubernetes版本和资源类型进行变化，记住不是写死的。</span></div></li><li><div><span style="font-size: 9pt;">kind：此处创建的是Pod，根据实际情况，此处资源类型可以是Deployment、Job、Ingress、Service等。</span></div></li><li><div><span style="font-size: 9pt;">metadata：包含Pod的一些meta信息，比如名称、namespace、标签等信息。</span></div></li><li><div><span style="font-size: 9pt;">spec：包括一些container，storage，volume以及其他Kubernetes需要的参数，以及诸如是否在容器失败时重新启动容器的属性。可在特定Kubernetes API找到完整的Kubernetes Pod的属性。</span></div></li></ul></ul><div><font style="background-color: rgb(255, 250, 165); font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold;-evernote-highlight:true;">使用YAML创建Deployment</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image [3].png" type="image/png" data-filename="Image.png" width="426"/></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">注意这里apiVersion对应的值是extensions/v1beta1，同时也需要将kind的类型指定为Deployment。</span></div></li><li><div><span style="font-size: 9pt;">metadata指定一些meta信息，包括名字或标签之类的。</span></div></li><li><div><span style="font-size: 9pt;">spec 选项定义需要两个副本，此处可以设置很多属性，例如受此Deployment影响的Pod的选择器等</span></div></li><li><div><span style="font-size: 9pt;">spec 选项的template其实就是对Pod对象的定义</span></div></li><li><div><span style="font-size: 9pt;">可以在Kubernetes v1beta1 API 参考中找到完整的Deployment可指定的参数列表</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="color: rgb(50, 135, 18); font-size: 14pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用YAML创建Service</span></font></div><ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">创建示例</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/Kubernetes之YAML文件_files/Image [4].png" type="image/png" data-filename="Image.png" width="252"/></span></div></li></ul><li><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">语法分析</span></font></div></li><ul><li><div><span style="font-size: 9pt;">port表示：service暴露在cluster ip(Seriver ip )上的端口</span></div></li><li><div><span style="font-size: 9pt;">nodePort: kubernetes提供给集群外部客户访问service入口的一种方式, 和访问的端口地址</span></div></li><li><div><span style="font-size: 9pt;">targetPort很好理解，targetPort是pod上的端口</span></div></li></ul></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html>