---
title: shell基础-变量
date: "2017-08-16 22:00:00"
categories:
- shell
- shell语法
tags:
- shell
toc: true
---

<html>
<body>
<div>
<span><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">shell的介绍</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">什么是shell</span></font></div></li><ul><li><div><span style="font-size: 9pt;"> shell是一种命令解释器，而linux的shell则是用来保护内核的，或者和内核进行交互的   </span></div></li><li><div><span style="font-size: 9pt;">Python脚本首行的#！/bin/python其实就是指定了Python脚本运行的时候使用的解释器</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell的分类</span></font></div></li><ul><li><div><span style="font-size: 9pt;">窗口式的shell       </span></div></li><ul><li><div><span style="font-size: 9pt;">Windows的桌面       </span></div></li><li><div><span style="font-size: 9pt;">各个发行版的linux的桌面    </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">命令行shell       </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;"> windows        cmd(命令行提示符)        </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">linux        sh        … …    bash        </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">linux查看默认shell解释器的方法        echo    $SHELL    </span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">常见的linux发行版本</span></font></div></li><ul><li><div><span style="font-size: 9pt;">ubuntu            界面化操作比较方便    </span></div></li><li><div><span style="font-size: 9pt;">centos            6.5-6.7    </span></div></li><li><div><span style="font-size: 9pt;">redhat            收费    </span></div></li><li><div><span style="font-size: 9pt;">debain    </span></div></li><li><div><span style="font-size: 9pt;">kali                渗透测试</span></div></li></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">shell命令与shell脚本的介绍</span></font></span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell命令</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">什么是shell命令</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一条命令,包括shell自身的命令以及linux系统命令        </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">特点:            </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">逐行输入，逐行输出            </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">无法重复使用</span></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell脚本</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">什么是shell命令脚本</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一堆shell命令的组合</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">特点:            </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">一次输入，逐行执行            </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">脚本可以重复使用，提高工作效率</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell脚本的规范</span></font></div></li><ul><li><div><span style="font-size: 9pt;">命名 </span></div></li><ul><li><div><span style="font-size: 9pt;">命名要有意义，最好能够表明脚本功能        </span></div></li><li><div><span style="font-size: 9pt;">后缀一般以.sh结尾        </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">首行是并且必须是命令解释器        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">默认首行使用    #!/bin/bash        </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">特殊情况可以根据环境修改        </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">版权信息        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">首行之下必须使用注释写明脚本的基本信息            </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">脚本名，功能，编写时间，编写人，联系方式等    </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">脚本的执行顺序        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">根据脚本编写顺序，从上到下依次执行    </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">成对编写        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">() [] {} “” ’’</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">shell执行方式</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">使用命令解释器加载脚本文件     </span></font></div></li><ul><li><div><span style="font-size: 9pt;">执行方式  </span></div></li><ul><li><div><span style="font-size: 9pt;">bash  </span><span style="font-size: 9pt; line-height: 1.45;">脚本文件       </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;"> 使用场景:    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">生产常用    </span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 1.45;"><span style="font-size: 9pt; line-height: 1.45; font-weight: bold;">使用脚本的绝对路径或相对路径执行     </span>    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">执行方式</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">直接用./文件路径执行脚本文件        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">当在脚本所在目录的时候，使用相对路径要加  ./脚本文件名</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">使用条件条件:  </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">脚本有用可执行权限                    </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">脚本首行选定了解释器                </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">使用场景:    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">私下        </span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">source或.的形式  </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">执行方式      </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">source 或 .    脚本文件        将脚本中的变量都导入到当前的环境</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">作用</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">加载文件，将写在文件中的配置信息马上生效        </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">使用场景:   </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">保证环境变量的一致性</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">运行方式</span></font></div></li><ul><li><div><span style="font-size: 12px;">让shell脚本在后台运行</span></div></li><ul><li><div><span style="font-size: 12px;">&amp;  运行shell脚本的时候在后面加上&amp;，代表以后台运行的方式</span></div></li></ul><li><div><span style="font-size: 9pt;">运行的输出</span></div></li><ul><li><div><span style="font-size: 9pt;">1&gt; 指标准信息输出路径（也就是默认的输出方式）</span></div></li><li><div><span style="font-size: 9pt;">2&gt; 指错误信息输出路径</span></div></li><li><div><span style="font-size: 9pt;">2&gt;&amp;1 指将标准信息输出路径指定为错误信息输出路径（也就是都输出在一起）</span></div></li></ul><li><div><span style="font-size: 9pt;">习惯上</span></div></li><ul><li><div><span style="font-size: 9pt;">标准输入（standard input）的文件描述符是 0</span></div></li><li><div><span style="font-size: 9pt;">标准输出（standard output）是 1</span></div></li><li><div><span style="font-size: 9pt;">标准错误（standard error）是 2</span></div></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">shell变量</span></font></span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell的变量介绍</span></font></div></li><ul><li><div><span style="font-size: 9pt;">变量包括两部分:        （变量名就是存放变量值的容器，容器不变，但是存放的内容可变）</span></div></li><ul><li><div><span style="font-size: 9pt;">变量名      不变        </span></div></li><li><div><span style="font-size: 9pt;">变量值      变化            </span></div></li></ul><li><div><span style="font-size: 9pt;">shell中变量的统一格式</span></div></li><ul><li><div><span style="font-size: 9pt;">基本格式：</span></div></li><ul><li><div><span style="font-size: 9pt;">变量名=变量值</span></div></li></ul><li><div><span style="font-size: 9pt;">注意：</span></div></li><ul><li><div><span style="font-size: 9pt;">等号左右两边没有空格</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">shell中的变量的分类</span></div></li><ul><li><div><span style="font-size: 9pt;">本地变量</span></div></li><li><div><span style="font-size: 9pt;">全局变量</span></div></li><li><div><span style="font-size: 9pt;">内置变量</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">本地变量</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">本地变量定义</span></font></div></li><ul><li><div><span style="font-size: 9pt;">在当前的shell或者当前脚本存续期间可用的变量</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">数据变量的定义方式（三种）</span></font></div></li><ul><li><div><span style="font-size: 9pt;">变量名=变量值            </span></div></li><ul><li><div><span style="font-size: 9pt;">变量值必须是连续的，不能有空格，不能有特殊字符                </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">变量名=‘变量值’            </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">变量值可以是不连续的，能有空格，特殊字符原样，引号中的是什么就是什么       </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">变量名=&quot;变量值&quot;            </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">值可以不连续，如果值中使用已定义变量，则会先调用，再赋值</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">命令变量的定义</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">定义方式</span></div></li><ul><li><div><span style="font-size: 9pt;">变量名=`命令`                注意命令两边的符号</span></div></li><li><div><span style="font-size: 9pt;">变量名=$(命令)                </span></div></li></ul><li><div><span style="font-size: 9pt;">执行顺序:    </span></div></li><ul><li><div><span style="font-size: 9pt;">先运行命令，将命令执行的结果赋值给变量名</span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">全局变量</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">什么是全局变量</span></font></div></li><ul><li><div><span style="font-size: 9pt;">系统所有环境都可以使用的变量        </span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">查看全局变量方法</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">env命令    </span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">定义方法</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">分步的方式</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">变量名=变量值 </span><span style="font-size: 9pt; line-height: 1.45;">      （</span><span style="font-size: 9pt; line-height: 1.45;">定义一个本地变量，可以是数据或者是命令</span><span style="font-size: 9pt; line-height: 1.45;">）                                          </span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">export    变量名     （</span><span style="font-size: 9pt; line-height: 1.45;">声明为全局变量</span><span style="font-size: 9pt; line-height: 1.45;">）  </span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">同时定义                </span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">export    变量名=变量值       <span style="font-size: 9pt; line-height: 1.45;">（变量</span><span style="font-size: 9pt; line-height: 1.45;">可以是数据或者是命令</span><span style="font-size: 9pt; line-height: 1.45;">）</span></span></font></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">内置变量</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">什么是内置变量</span></font></div></li><ul><li><div><span style="font-size: 9pt;">ash命令内部已经定义好的变量，可以直接使用，不需要定义</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">使用方法 </span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">和</span><span style="font-size: 9pt; color: rgb(167, 69, 0); font-weight: bold;">s</span><span style="font-size: 9pt; color: rgb(167, 69, 0); font-weight: bold;">hell脚本</span><span style="font-size: 9pt; font-weight: bold;">有关的内置变量</span></font></div></li><ul><li><div><span style="font-size: 9pt;">$0        获取当前脚本文件名称           </span></div></li><li><div><span style="font-size: 9pt;">$#        获取当前脚本获取的参数的个数            </span></div></li><li><div><span style="font-size: 9pt;">$n        获取当前脚本获取到的第n个参数                        </span></div></li><li><div><span style="font-size: 9pt;">$?        获取上一条命令的执行情况，0表示成功，1表示失败，127表示找不到命令                        </span></div></li><li><div><span style="font-size: 9pt;">$$        脚本运行时使用的进程号                    </span></div></li><li><div><span style="font-size: 9pt;">$@       获取所有的参数</span></div></li></ul><li><div><span style="line-height: 13.6px;">获取hash序列</span></div></li><ul><li><div><span style="font-size: 9pt;">$RANDOM      获取随机的5为随机数</span></div></li><li><div><span style="font-size: 12px; line-height: 13.6px;">$RANDOM | md5sum(有的bash是md5)   将变量进行md5序列化</span></div></li><ul><li><div><span style="line-height: 13.6px;">返回的是一个序列化的字符串和一个 -  符号</span></div></li></ul><li><div><span style="line-height: 13.6px;">\$RANDOM | md5sum | awk '{printf $1}'    将awk接收到的第一个参数打印出来（即序列化结果）</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">和</span><span style="font-size: 9pt; color: rgb(167, 69, 0); font-weight: bold; line-height: 13.6px;">字符串</span><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">相关的内置变量</span></font></div></li><ul><li><div><span style="font-size: 9pt;">截取</span></div></li><ul><li><div><span style="font-size: 9pt;">使用方法           </span></div></li><ul><li><div><span style="font-size: 9pt;">${var_name:start:n}                            </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">备注</span></div></li><ul><li><div><span style="line-height: 1.45; font-size: 9pt;">var_name是字符串变量名            </span></div></li><li><div><span style="line-height: 1.45; font-size: 9pt;">start表示的截取的起始位置                </span></div></li><ul><li><div><span style="line-height: 1.45; font-size: 9pt;">start整数            从开头开始                </span></div></li><li><div><span style="line-height: 1.45; font-size: 9pt;">start:n 为 0-n        从结尾往前推n个位开始         </span></div></li></ul><li><div><span style="line-height: 1.45; font-size: 9pt;">n    表示截取字符的个数</span></div></li></ul></ul><li><div><span style="font-size: 9pt;">和默认值相关的内置变量</span></div></li><ul><li><div><span style="font-size: 9pt;">第一种            </span></div></li><ul><li><div><span style="font-size: 9pt;">var_name=$1            </span></div></li><li><div><span style="font-size: 9pt;">${var_name:-default}                            </span></div></li><ul><li><div><span style="font-size: 9pt;">default表示默认值,如果没有输入参数，default将会被使用                </span></div></li></ul></ul><li><div><span style="line-height: 1.45; font-size: 9pt;">第二种            </span></div></li><ul><li><div><span style="line-height: 1.45; font-size: 9pt;">var_name=$1            </span></div></li><li><div><span style="line-height: 1.45; font-size: 9pt;">${var_name:+default}                        </span></div></li><ul><li><div><span style="line-height: 1.45; font-size: 9pt;">将会无视输入参数，直接输出设定好的默认值</span></div></li></ul></ul></ul></ul></ul></ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 12pt;"><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">查看变量的方式</span></font></span></div></li><ul><li><div><span style="font-size: 9pt;">$变量名        </span></div></li><ul><li><div><span style="font-size: 9pt;">使用场景:    私下使用时    </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">&quot;$变量名&quot;        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">使用场景:    调用变量时   </span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 1.45;">&quot;</span><span style="font-size: 9pt; line-height: 1.45;">${变量名}</span><span style="font-size: 9pt; line-height: 1.45;">&quot;        标准的使用方法</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">用场景:    脚本中，规范化作业时</span></div></li></ul></ul><li><div><font style="font-size: 12pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">变量的运算</span></span></font></div></li><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">shell中变量运算方法 </span>    </span></div></li><ul><li><div><span style="font-size: 9pt;">1.使用let进行运算            </span></div></li><ul><li><div><span style="font-size: 9pt;">let n=n+1 </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">let n+=1   实现自加</span><span style="font-size: 9pt; line-height: 1.45;">       </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">2.使用$(())实现运算            </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">n=\$(($n+1))</span></div></li></ul></ul></ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 12pt;"><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">变量的其他操作</span></font></span></div></li><ul><li><div><span style="font-size: 9pt;">将一个本地变量设置为只读，不允许删除变量，关闭终端才能删除        </span></div></li><ul><li><div><span style="font-size: 9pt;">readonly   变量名    </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">删除变量        </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">unset   变量名</span></div></li></ul></ul></ul></div><div><br/></div></span>
</div></body></html>