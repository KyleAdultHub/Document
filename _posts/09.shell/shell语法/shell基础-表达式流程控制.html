---
title: shell基础-表达式流程控制
date: "2017-08-17 22:00:00"
categories:
- shell
- shell语法
tags:
- shell
toc: true
---

<html>
<body>
<div>
<span><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">shell表达式</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">shell的验证表达式</span></font></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 15.2px;">表达式的表达方式</span></div></li><ul><li><div><span style="font-size: 9pt;">方法1</span></div></li><ul><li><div><span style="font-size: 9pt;">[ 表达式 ]</span></div></li></ul><li><div><span style="font-size: 9pt;">方法2</span></div></li><ul><li><div><span style="font-size: 9pt;">test 表达式</span></div></li></ul><li><div><span style="line-height: 13.6px;">备注</span></div></li><ul><li><div><span style="font-size: 9pt;">表达式两边必须要有空格，表达式之间需要有空格</span></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">如果结果为真返回0，结果不为真则返回其他</span></font></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">表达式由变量和运算符构成</span></div></li></ul></ul><li><div><font style="font-size: 12px;"><span style="font-size: 12px; font-weight: bold; line-height: 13.6px;">表达式的运算符</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">shell的数字运算符</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">表达式格式</span></div></li><ul><li><div><span style="font-size: 9pt;">[ n1 –gt n2 ]</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">表达式参数</span></div></li><ul><li><div><span style="font-size: 9pt;">-gt              大于        </span></div></li><li><div><span style="font-size: 9pt;">-lt               小于        </span></div></li><li><div><span style="font-size: 9pt;">-eq             等于        </span></div></li><li><div><span style="font-size: 9pt;">-ne             不等于</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">shell的字符串运算符</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">表达式格式</span></div></li><ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">[ n1  ==  n2 ]</span></div></li><li><div><span style="line-height: 13.6px; font-size: 9pt;">[  -z   n1]</span></div></li></ul><li><div><span style="line-height: 13.6px; font-size: 9pt;">表达式参数</span></div></li><ul><li><div><span style="font-size: 9pt;">==            判断两个字符串是否相等        </span></div></li><li><div><span style="font-size: 9pt;">!=             判断连个字符串是否不一致        </span></div></li><li><div><span style="font-size: 9pt;">-z              判断字符串长度是否为0   </span><span style="font-size: 9pt;">     </span></div></li><li><div><span style="font-size: 9pt;">-n             判断字符串长度是否不为0</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">shell的文件运算符</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">表达式格式</span></div></li><ul><li><div><span style="font-size: 9pt;">[ 文件运算符  文件名 ]    </span></div></li></ul><li><div><span style="line-height: 13.6px;">文件运算符</span></div></li><ul><li><div><span style="font-size: 9pt;">-f             判断输入的内容是否是一个文件            </span></div></li><li><div><span style="font-size: 9pt;">-d            判断输入的内容是否是一个目录        </span></div></li><li><div><span style="font-size: 9pt;">-x             判断输入的文件是否有执行权限        </span></div></li><li><div><span style="font-size: 9pt;">-e            判断输入的内容表示的文件是否存在                </span></div></li><li><div><span style="font-size: 9pt;">-r             判断文件是否可读                </span></div></li><li><div><span style="font-size: 9pt;">-w            判断文件是否可写</span></div></li></ul></ul></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">shell逻辑表达式</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">&amp;&amp;        并</span></div></li><ul><li><div><span style="font-size: 9pt;">表达式格式       </span></div></li><ul><li><div><span style="font-size: 9pt;">命令白表达式1 &amp;&amp; 命令表达式2       </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">效果</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">如果命令1执行成功，则执行命令2                </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">如果命令1执行失败，则不执行命令2    </span></div></li></ul></ul><li><div><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;"> ||        或  </span><span style="font-size: 9pt; line-height: 1.45;">          </span></div></li><ul><li><div><span style="font-size: 12px; line-height: 13.6px;">表达式格式</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">命令1 || 命令2            </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">效果</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">如果命令1执行成功，则不执行命令2                </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">如果命令1执行不成功，则执行命令2        </span></div></li></ul></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">python的流程控制</span></font></span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell流程控制的分类</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">简单的流程控制</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">选择流程</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">if语句</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">单if语句   双if语句    多if语句</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">case语句</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">循环流程</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">for循环</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">while循环</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">until循环</span></div></li></ul></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">复杂的流程控制</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">函数</span></font></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">shell中流程控制规则</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">缩进</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">shell中的缩进没有作用，只是为了好看</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">符号成对写</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;"> [ ]   ( )   { }</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">流程控制语句一定要先写完</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">选择流程控制语句</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">if语句</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">单if语句写法</span></div></li><ul><li><div><span style="font-size: 9pt;">if         条件语句；</span></div></li><li><div><span style="font-size: 9pt;">then</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句</span></div></li></ul><li><div><span style="font-size: 9pt;">fi</span></div></li></ul><li><div><span style="font-size: 9pt;">双if语句</span></div></li><ul><li><div><span style="font-size: 9pt;">if          条件语句1 ；</span></div></li><li><div><span style="font-size: 9pt;">then</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句1</span></div></li></ul><li><div><span style="font-size: 9pt;">else</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句2</span></div></li></ul><li><div><span style="font-size: 9pt;">fi</span></div></li></ul><li><div><span style="font-size: 9pt;">多if语句</span></div></li><ul><li><div><span style="font-size: 9pt;">if          条件语句1；</span></div></li><li><div><span style="font-size: 9pt;">then</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句1</span></div></li></ul><li><div><span style="font-size: 9pt;">elif      条件语句2；</span></div></li><li><div><span style="font-size: 9pt;">then</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句2</span></div></li></ul><li><div><span style="font-size: 9pt;">else</span></div></li><ul><li><div><span style="font-size: 9pt;">执行语句3</span></div></li></ul><li><div><span style="font-size: 9pt;">fi</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">case语句</span></font></div></li><ul><li><div><span style="font-size: 9pt;">case语句写法</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">case  值  in                </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">值1)                    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">执行语句1                    </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">;;               </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;"> 值2)                    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">执行语句2                    </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">;;                </span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 1.45;">值3)                    </span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">执行语句3                    </span></div></li><li><div><span style="font-size: 9pt; line-height: 1.45;">;;            </span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; line-height: 1.45;">esac</span></font></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">循环控制语句</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">for循环语句</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">for      条件表达式；</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">do</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">执行语句</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">done</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">while循环</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">while   条件表达式；</span></font></div></li><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">do</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">执行语句</span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">done</span></font></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">until循环语句</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">使用方法</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">until    条件表达式；</span></font></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">do</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">执行语句</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">done</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">until语句的特点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">当条件不成立时，执行循环，一旦条件成立则结束循环</span></div></li></ul></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">函数</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">函数的使用场景</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">不带参数的函数，应用在重复功能封装的情况下</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">带参数的函数，应用在条件判断执行的情况下</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">定义函数</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">func_name(){</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">args=$n         (不写此行代表函数不需要接受参数)</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">函数体</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">}</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">调用函数</span></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">func_name args1 args2</span></font></div></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">将shell脚本设置为系统环境变量的方法</span></span></div></div><div><ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">1、直接在命令行中设置PATH</span></span></div></li><ul><li><div><span style="font-size: 9pt;"># PATH=$PATH:/usr/local/apache/bin</span></div></li><li><div><span style="font-size: 9pt;">使用这种方法,只对当前会话有效，也就是说每当登出或注销系统以后，PATH设置就会失效。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">2、在profile中设置PATH</span></span></div></li><ul><li><div><span style="font-size: 9pt;"># vi /etc/profile</span></div></li><li><div><span style="font-size: 9pt;">找到export行，在下面新增加一行，内容为：export PATH=$PATH:/usr/local/apache/bin。</span></div></li><li><div><span style="font-size: 9pt;">注：＝ 等号两边不能有任何空格。这种方法最好,除非手动强制修改PATH的值,否则将不会被改变。</span></div></li><li><div><span style="font-size: 9pt;">编辑/etc/profile后PATH的修改不会立马生效，如果需要立即生效的话，可以执行# source profile命令。</span></div></li></ul><li><div><span style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">3、在当前用户的profile中设置PATH</span></span></div></li><ul><li><div><span style="font-size: 9pt;"># vi ~/.bash_profile</span></div></li><li><div><span style="font-size: 9pt;">修改PATH行,把/usr/local/apache/bin添加进去,如：PATH=\$PATH:$HOME/bin:/usr/local/apache/bin。</span></div></li><li><div><span style="font-size: 9pt;"># source ~/.bash_profile</span></div></li><li><div><span style="font-size: 9pt;">让这次的修改生效。</span></div></li><li><div><span style="font-size: 9pt;">注：这种方法只对当前用户起作用的,其他用户该修改无效。</span></div></li></ul></ul></div><div><br/></div></span>
</div></body></html>