---
title: Mysql-内置函数
date: "2016-06-05 22:00:00"
categories:
- 数据存储
- Mysql
tags:
- Mysql
toc: true
---

<html>
<head>
  <title>Mysql-内置函数</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="949"/>
<h1>Mysql-内置函数</h1>

<div>
<span><div><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.600000381469727px;-evernote-highlight:true;">mysql中的内置函数</span></div><div><ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">字符串函数</span></font></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">查看字符的ascii码值ascii(str)，str是空串时返回0</span></li><ul><li><span style="font-size: 9pt; line-height: 1.45;">select ascii(&quot;a&quot;);</span></li></ul><li><span style="font-size: 9pt;">查看ascii码值对应的字符char(数字)</span></li><ul><li><span style="font-size: 9pt;">select char(97);</span></li></ul><li><span style="font-size: 9pt;">拼接字符串concat(str1,str2...)</span></li><ul><li><span style="font-size: 9pt;">select concat(12,34,'ab');</span></li></ul><li><span style="font-size: 9pt;">包含字符个数length(str)</span></li><ul><li><span style="font-size: 9pt;">select length('abc');</span></li></ul><li><span style="font-size: 9pt;">截取字符串  </span></li><ul><li><span style="font-size: 9pt;">返回字符串str的左端len个字符 left(str,len)</span></li><li><span style="font-size: 9pt;">返回字符串str的右端len个字符 right(str,len)</span></li><li><span style="font-size: 9pt;">返回字符串str的位置pos起len个字符 substring(str,pos,len)</span></li><ul><li><span style="font-size: 9pt;">例子：select substring('abc123',2,3);</span></li></ul></ul><li><span style="font-size: 9pt;">去除空格</span></li><ul><li><span style="font-size: 9pt;">ltrim(str)返回删除了左空格的字符串str</span></li><li><span style="font-size: 9pt;">rtrim(str)返回删除了右空格的字符串str</span></li><li><span style="font-size: 9pt;">trim([方向 “x” from str)返回从某侧删除remstr后的字符串str，方向词</span><span style="font-size: 9pt; line-height: 1.45;">包括both、leading、trailing，表示两侧、左、右（只填入一个字符串默认删除两侧的空格）</span></li><ul><li><span style="font-size: 9pt;">select trim(trailing 'x' FROM 'xxxbarxxx');</span></li></ul></ul><li><span style="font-size: 9pt;">返回由n个空格字符组成的一个字符串space(n)</span></li><ul><li><span style="font-size: 9pt;">select space(10);</span></li></ul><li><span style="font-size: 9pt;">替换字符串replace(str,from_str,to_str)</span></li><ul><li><span style="font-size: 9pt;">select replace('abc123','123','def');     “将字符串中的123替换为def”</span></li></ul><li><span style="font-size: 9pt;">大小写转换，函数如下</span></li><ul><li><span style="font-size: 9pt;">lower(str)   将字符串全部变为小写</span></li><li><span style="font-size: 9pt;">upper(str)  将字符串全部变为大写</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">数学函数</span></font></li><ul><li><span style="font-size: 9pt;">求绝对值abs(n)</span></li><ul><li><span style="font-size: 9pt;">select abs(-32);</span></li></ul><li><span style="font-size: 9pt;">求m除以n的余数mod(m,n)，同运算符%</span></li><ul><li><span style="font-size: 9pt;">select mod(10,3);</span></li></ul><li><span style="font-size: 9pt;">地板floor(n)，表示不大于n的最大整数</span></li><ul><li><span style="font-size: 9pt;">select floor(2.3);</span></li></ul><li><span style="font-size: 9pt;">天花板ceiling(n)，表示不小于n的最小整数</span></li><ul><li><span style="font-size: 9pt;">select ceiling(2.3);</span></li></ul><li><span style="font-size: 9pt;">求四舍五入值round(n,d)，n表示原数，d表示小数位置，默认为0</span></li><ul><li><span style="font-size: 9pt;">select round(1.6);</span></li></ul><li><span style="font-size: 9pt;">求x的y次幂pow(x,y)</span></li><ul><li><span style="font-size: 9pt;">求x的y次幂pow(x,y)</span></li></ul><li><span style="font-size: 9pt;">获取圆周率PI()</span></li><ul><li><span style="font-size: 9pt;">select PI();</span></li></ul><li><span style="font-size: 9pt;">随机数rand()，值为0-1.0的浮点数</span></li><ul><li><span style="font-size: 9pt;">select rand();</span></li><ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">可以用  order by rand（） 对结果进行乱序排序；</span></li></ul></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.600000381469727px;">日期时间函数</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">提醒：日期的格式：</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">2016-12-21 00:00:00</span></font></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">获取日期/时间中的子值（值为整数类型）</span></li><ul><li><span style="font-size: 9pt;">year(date)返回date的年份(范围在1000到9999)</span></li><li><span style="font-size: 9pt;">month(date)返回date中的月份数值</span></li><li><span style="font-size: 9pt;">day(date)返回date中的日期数值</span></li><li><span style="font-size: 9pt;">hour(time)返回time的小时数(范围是0到23)</span></li><li><span style="font-size: 9pt;">minute(time)返回time的分钟数(范围是0到59)</span></li><li><span style="font-size: 9pt;">second(time)返回time的秒数(范围是0到59)</span></li></ul><li><span style="font-size: 9pt;">日期计算，使用+/-运算符，数字后面的关键字为year、month、day、hour、</span><span style="font-size: 9pt; line-height: 1.45;">minute、second（可以用interval来将数值转换为标准日期的格式）</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：<span style="font-size: 9pt; line-height: 13.600000381469727px;">select '2016-12-21 00:00:00'+interval 1 day;</span></span></font></li></ul><li><span style="font-size: 9pt;">日期格式化 date_format(datetime,format)    “获得构造的fomat形式的日期格式”</span></li><ul><li><span style="font-size: 9pt;">参数format可选值如下：</span></li><ul><li><span style="font-size: 9pt;"><img src="/e_img/Mysql-内置函数_files/Image.png" type="image/png" data-filename="Image.png"/></span></li></ul><li><span style="font-size: 9pt;">示例：</span></li><ul><li><span style="font-size: 9pt;">select date_format('2016-12-21 00:00:00','%Y %m %d');</span></li></ul></ul><li><span style="font-size: 9pt;">当前日期current_date()</span></li><ul><li><span style="font-size: 9pt;">select current_date();</span></li></ul><li><span style="font-size: 9pt;">当前时间current_time()</span></li><ul><li><span style="font-size: 9pt;">select current_time();</span></li></ul><li><span style="font-size: 9pt;">当前日期时间now()</span></li><ul><li><span style="font-size: 9pt;">select now();</span></li></ul></ul><li><span style="font-size: 10pt; font-weight: bold;">类型转换函数</span></li><ul><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">类型换换函数 cast </span></li><ul><li><span style="font-size: 9pt;">格式：cast(value as type)      “value表示要转换的值， type表示目标类型”</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">SELECT CAST('125.83' AS signed);</span></li></ul><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">类型换换函数 convert</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 15.199999809265137px;">格式：<span style="font-size: 9pt; line-height: 15.199999809265137px;">convert(value, type)    <span style="font-size: 9pt; line-height: 15.199999809265137px;">“</span><span style="font-size: 9pt; line-height: 15.199999809265137px;">value表示要转换的值， </span><span style="font-size: 9pt; line-height: 15.199999809265137px;">type表示目标类型</span><span style="font-size: 9pt; line-height: 15.199999809265137px;">”</span></span></span></font></li><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">示例：</span><span style="font-size: 9pt; line-height: 15.199999809265137px;">SELECT CONVERT('125.83',SIGNED);</span></li></ul></ul><li><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">流程控制</span></font></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 15.199999809265137px;">介</span><span style="font-size: 9pt; line-height: 15.199999809265137px;">绍：</span><span style="font-size: 9pt; line-height: 15.199999809265137px;">类似于python中的if语句，进行选择判断，根据输入值的不同，返回不同的结果；</span></font></li><li><span style="font-size: 9pt; line-height: 15.199999809265137px;">case 语法：</span></li><ul><li><span style="font-size: 9pt;">case语法1：等值判断</span></li><ul><li><span style="font-size: 9pt;">说明：当变量等于某个比较值的时候，对应的结果会被返回；如果所有的比</span><span style="font-size: 9pt; line-height: 1.45;">较值都不相等则返回else的结果；如果没有else并且所有比较值都不相等则</span><span style="font-size: 9pt; line-height: 1.45;">返回null。</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">格式：</span></li><ul><li><span style="font-size: 9pt;">case 变量 when 比较值1 then 结果1 when 比较值2 then 结果2 ... else 结果n end</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span></li><ul><li><span style="font-size: 9pt;">select case n when 1 then 'one' when 2 then 'two' else 'zero' end。。。</span><span style="font-size: 9pt; line-height: 1.45;">;</span></li></ul></ul><li><span style="font-size: 9pt;">case语法2：非等值判断，可以进行 &gt; 、&lt;、!=等判断</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">说明：<span style="font-size: 9pt; line-height: 13.600000381469727px;">当某个条件返回true时，对应的结果被返回；如果所有的条件都不返</span></span><span style="font-size: 9pt; line-height: 1.45;">回true则返回else的结果；如果没有else并且所有条件都不返回true则返回null</span></font></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">格式：</span></li><ul><li><span style="font-size: 9pt;">case when 条件1 then 结果1 when 条件2 then 结果2 ... else 结果n end</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span></li><ul><li><span style="font-size: 9pt;">select case when 1 &gt; 2 then 'part1' when 3 &gt; 2 then 'part2' else 'part</span><span style="font-size: 9pt; line-height: 1.45;">3' end 。。。;</span></li></ul></ul></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">if 语句：</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">说明：</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">如果表达式的结果为true，则返回结果1,否则返回结果2</span></font></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">格式：</span></li><ul><li><span style="font-size: 9pt;">if(表达式,结果1,结果2)</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">例子：</span></li><ul><li><span style="font-size: 9pt;">select if(1 &gt; 2,2,3) as result;</span></li></ul></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">ifnull 语句</span></li><ul><li><span style="font-size: 9pt;">说明：如果表达式1不为null，则返回表达式1的结果，否则返回表达式2的</span><span style="font-size: 9pt; line-height: 1.45;">结果。</span></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">格式：</span></li><ul><li><span style="font-size: 9pt;">ifnull(表达式1,表达式2)</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span></li><ul><li><span style="font-size: 9pt;">select ifnull(1,0) as result;</span></li></ul></ul><li><span style="font-size: 9pt;">nullif语句</span></li><ul><li><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.600000381469727px;">说明：</span><span style="font-size: 9pt; line-height: 13.600000381469727px;">如果表达式1等于表达式2，则返回null，否则返回表达式1的结果；</span></font></li><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">格式：</span></li><ul><li><span style="font-size: 9pt;">nullif(表达式1,表达式2)</span></li></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">示例：</span></li><ul><li><span style="font-size: 9pt;">select nullif(1,0) as result;</span></li></ul></ul><li><span style="font-size: 9pt; line-height: 13.600000381469727px;">备注：所有的as result 都可以不写</span></li></ul></ul></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html>