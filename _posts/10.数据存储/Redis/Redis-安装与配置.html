---
title: Redis-安装与配置
date: "2016-06-12 22:00:00"
categories:
- 数据存储
- Redis
tags:
- Redis
toc: true
---

<html>
<body>
<div>
<span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Nosq的介绍</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">NoSQL的特点</span></font></div></li><ul><li><div><span style="font-size: 9pt;">不支持SQL语法</span></div></li><li><div><span style="font-size: 9pt;">存储结构跟传统关系型数据库中的那种关系表完全不同，nosql中存储的数据都是KV形式</span></div></li><li><div><span style="font-size: 9pt;">NoSQL的世界中没有一种通用的语言，每种nosql数据库都有自己的api和语法，以及擅长的业务场景</span></div></li><li><div><span style="font-size: 9pt;">NoSQL中的产品种类相当多：</span></div></li><ul><li><div><span style="font-size: 9pt;">Mongodb</span></div></li><li><div><span style="font-size: 9pt;">Redis</span></div></li><li><div><span style="font-size: 9pt;">Hbase hadoop</span></div></li><li><div><span style="font-size: 9pt;">Cassandra hadoop</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">NoSQl和SQL数据库的比较</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sql数据库适合用于关系特别复杂的数据查询场景，nosql反之</span></div></li><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">sql对事务的支持非常完善，而nosql基本不支持事务</span></div></li><ul><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">事务是必须满足4个条件</span><span style="font-size: 9pt; font-weight: bold;">（ACID）</span><span style="font-size: 9pt;">： Atomicity（原子性）、</span><span style="font-size: 9pt; line-height: 1.45;">Consistency（一致性）、Isolation（隔离性）、Durability（持久性）</span></div></li></ul><li><div><span style="font-size: 9pt;">两者在不断地取长补短，呈现融合趋势</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Redis简介</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。从2013年5月开始，Redis的开发由Pivotal赞助。</span></div></li><li><div><span style="font-size: 9pt;">Redis是 NoSQL技术阵营中的一员，它通过多种键值数据类型来适应不同场景下的存储需求，借助一些高层级的接口使用其可以胜任，如缓存、队列系统的不同角色</span></div></li></ul></ul></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">Redis缓存产品有以下三个特点</span>：</div></li><ul><li><div><span style="font-size: 9pt;">Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</span></div></li><li><div><span style="font-size: 9pt;">Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</span></div></li><li><div><span style="font-size: 9pt;">Redis支持数据的备份，即master-slave模式的数据备份。</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Redis的优势</span></font></div></li><ul><li><div><span style="font-size: 9pt;">性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</span></div></li><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</span></div></li><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。</span></div></li><li><div><span style="font-size: 9pt;">丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">Redis的应用场景</span></font></div></li><ul><li><div><span style="font-size: 9pt;">用来做缓存(ehcache/memcached)——redis的所有数据是放在内存中的（内存数据库）</span></div></li><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">可以在某些特定应用场景下替代传统数据库——比如社交类的应用</span></div></li><li style="-webkit-font-smoothing: antialiased; box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><div><span style="font-size: 9pt;">在一些大型系统中，巧妙地实现一些特定的功能：session共享、购物车</span></div></li><li><div><span style="font-size: 9pt;">只要你有丰富的想象力，redis可以用在可以给你无限的惊喜…….</span></div></li></ul></ul><div><font style="font-size: 14pt;"><span style="font-size: 14pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">安装redis服务</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">前提：环境准备(如果要编译安装redis)</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo apt-get update        更新apt</span></div></li><li><div><span style="font-size: 9pt;">sudo apt-get install build-essential tcl      安装c/c++的编译环境</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">安装redis-server</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo apt-get install redis-server -y         安装redis-server</span></div></li><ul><li><div><span style="letter-spacing: 0.2px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">当前redis最新版本是4.0，它是一个测试版本，稳定版本是3.2.8版本</span></span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">查看redis主要的文件详解</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">sudo  find  /  -name  &quot;*redis*&quot;     查找redis安装的所有相关文件及其所在目录</span></div></li><li><div><span style="font-size: 9pt; line-height: 13.6px;">/etc/    存放应用的配置</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">/etc/redis/redis.conf             </span><span style="font-size: 9pt; line-height: 13.6px;">redis的配置文件</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果不是通过apt下载该文件可能不在不在/etc目录下需要手动将该文件移动到该位置</span></div></li></ul><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server         redis启动文件</span></div></li><ul><li><div><span style="font-size: 9pt;">使用redis启动配置文件也可以用来启动redis-server</span></div></li><ul><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server start       开启redis-server</span></div></li><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server stop     关闭redis-server</span></div></li><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server status      检查redis-server状态</span></div></li><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server restart      重启redis-server</span></div></li><li><div><span style="font-size: 9pt;">/etc/init.d/redis-server force-reload      强制重载</span></div></li></ul></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; line-height: 13.6px;">/var/log/    存放应用的log日志</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">/var/log/redis       </span><span style="font-size: 9pt; line-height: 13.6px;">redis日志路径</span></div></li></ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">/usr/bin/     存放系统引用的启动脚本文件</span></div></li><ul><li><div><span style="font-size: 9pt;">/usr/bin/redis-cli                        redis客户端命令</span></div></li><li><div><span style="font-size: 9pt;">/usr/bin/redis-server                 redis服务端命令</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">启动服务可以在命令后面传入配置配件，该文件可以自定义，用来启动自定义配置的redis服务器</span></div></li></ul><li><div><span style="font-size: 9pt;">/usr/bin/redis-check-aof          redis数据存储(AOF文件)监测工具</span></div></li><li><div><span style="font-size: 9pt;">/usr/bin/redis-benchmark        redis性能压测工具</span></div></li><li><div><span style="font-size: 9pt;">/usr/bin/redis-check-dump      redis数据监测工具</span></div></li></ul></ul></ul><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">配置redis</span></font></span></div></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">redis的配置信息所在位置</span></font></div></li><ul><li><div><span style="letter-spacing: 0.2px; orphans: 3; text-indent: 0px; text-transform: none; white-space: normal; widows: 3; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt;">/etc/redis/redis.conf下</span></span></div></li></ul><li style="orphans: 3; widows: 3;"><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">核心redis配置选项</span></font></div></li><ul><li style="orphans: 3; widows: 3;"><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">绑定ip：如果需要远程访问，可将此⾏注释，或绑定⼀个真实ip</span></font></div></li><ul><li style="orphans: 3; widows: 3;"><div><span style="font-size: 9pt; line-height: 13.6px;">bind 127.0.0.1</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">port，默认为6379</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">port  6379</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">是否以守护进程运⾏</span></font></div></li><ul><li><div><span style="font-size: 9pt;">daemonize yes</span></div></li><ul><li><div><span style="font-size: 9pt;">如果以守护进程运⾏，则不会在命令⾏阻塞，类似于服务</span></div></li><li><div><span style="font-size: 9pt;">如果以⾮守护进程运⾏，则当前终端被阻塞</span></div></li><li><div><span style="font-size: 9pt;">设置为yes表示守护进程，设置为no表示⾮守护进程</span></div></li><li><div><span style="font-size: 9pt;">推荐设置为yes</span></div></li><li><div><span style="font-size: 9pt;">设置为yes  进程将不能被kill杀死，但是使用 kill   - 9可以杀死</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">数据库，默认有16个</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">database 16</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">进程文件</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">pidfile /var/run/redis/redis-server.pid</span></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">在一个用户使用服务的时候，会创建锁文件，同一时间只能一个用户使用</span></div></li></ul></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">⽇志⽂件</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">logfile /var/log/redis/redis-server.log</span></div></li></ul><li style="orphans: 3; widows: 3;"><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">主从复制，类似于双机备份。</span></font></div></li><ul><li style="orphans: 3; widows: 3;"><div><span style="font-size: 9pt; line-height: 1.45;">slaveof</span></div></li></ul><li style="orphans: 3; widows: 3;"><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">数据⽂件</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">dbfilename dump.rdb</span></div></li></ul><li style="orphans: 3; widows: 3;"><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">数据⽂件存储路径</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 1.45;">dir /var/lib/redis</span></div></li></ul></ul></ul><div style="orphans: 3; widows: 3;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><font style="font-size: 14pt;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 13.6px;-evernote-highlight:true;">自定义配置redis服务器</span></font></span></div></div><div style="orphans: 3; widows: 3;"><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">原理</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">因为可以通过 redis-server  配置文件    的方式来以传入的配置文件配置来启动redis服务，所以，这通这种方式可以启动多个redis服务端</span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold; line-height: 13.6px;">自定义redis配置的步骤</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">创建目录和拷贝文件</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">cd  ~ </span></div></li><li><div><span style="font-size: 9pt;">mkdir redis</span></div></li><li><div><span style="font-size: 9pt;">sudo cp /etc/redis/redis.conf   ./</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 1.45;">赋权</span></font></div></li><ul><li><div><span style="font-size: 9pt;">sudo  chown  python.python  -a  -R  redis</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">修改配置文件：</span></font></div></li><ul><li><div><span style="font-size: 9pt;">46:pidfile redis-server.pid</span></div></li><li><div><span style="font-size: 9pt;">50:port 6380</span></div></li><li><div><span style="font-size: 9pt;">69:bind 127.0.0.1</span></div></li><li><div><span style="font-size: 9pt;">108:logfile redis-server.log</span></div></li><li><div><span style="font-size: 9pt;">如果不是sudo用户最少要修改 pidfile、logfile，</span><span style="font-size: 9pt; line-height: 1.45;">不然的话，运行过程中会报权限问题</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">启动和终止方式：</span></font></div></li><ul><li><div><span style="font-size: 9pt;">cd redis</span></div></li><li><div><span style="font-size: 9pt;">redis-server redis.conf</span></div></li><li><div><span style="font-size: 9pt;">ps aux | grep 6080</span></div></li><li><div><span style="font-size: 9pt;">kill pid_num</span></div></li></ul></ul></ul></div><div><br/></div></div><div><br/></div></span>
</div></body></html>