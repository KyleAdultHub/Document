---
title: scrapy框架介绍
date: "2017-03-02 23:00:00"
categories:
- python爬虫
- scrapy框架
tags:
- 爬虫
- scrapy
toc: true
typora-root-url: ..\..\..
---

<html>
<body>
<div>
<span><div><div><font style="background-color: rgb(255, 250, 165);font-size: 14pt;-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 14pt; color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">scrapy框架的介绍</span></font></div><div><ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">什么是scrapy框架</span></font></div></li><ul><li><div><span style="font-size: 9pt;">Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架，我们只需要实现少量的代码，就能够快速的抓取</span></div></li><li><div><span style="font-size: 9pt;">Scrapy 使用了 Twisted['twɪstɪd]异步网络框架，可以加快我们的下载速度和数据在模块中间的转载速度。</span></div></li><li><div><a href="http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html" style="font-size: 9pt;">http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html</a></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">异步和非阻塞的概念</span></font></div></li><ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold; line-height: 13.6px;">非阻塞</span></font></div></li><ul><li><div><span style="font-size: 9pt;">关注的是程序在等待调用结果（消息，返回值）时的</span><span style="font-size: 9pt; font-weight: bold;">状态</span><span style="font-size: 9pt;">，指在不能立刻得到结果之前，该调用不会阻塞当前线程。</span></div></li></ul><li><div><font style="font-size: 9pt;"><span style="font-size: 9pt; font-weight: bold;">异步</span></font></div></li><ul><li><div><span style="font-size: 9pt; line-height: 13.6px;">如果整个程序没有中介的等待过程，我们就说整个过程是一个异步的过程</span></div></li></ul></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">多线程爬取数据的流程</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image.png" type="image/png" data-filename="Image.png" width="349"/></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">scrapy的爬虫流程</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image [1].png" type="image/png" data-filename="Image.png" width="449"/></span></div></li></ul><li><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">scrapy框架各模块功能</span></font></div></li><ul><li><div><span style="font-size: 9pt;"><img src="/e_img/scrapy框架介绍_files/Image [2].png" type="image/png" data-filename="Image.png" width="420"/></span></div></li></ul></ul></div><div><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(50, 135, 18); font-weight: bold; line-height: 1.45;-evernote-highlight:true;">创建爬虫项目（命令）</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">创建项目</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy startproject +&lt;项目名字&gt;</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">创建后项目目录结构</span></div></li><ul><li><div><img src="/e_img/scrapy框架介绍_files/Image [3].png" type="image/png" data-filename="Image.png" width="266"/></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">创建爬虫</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy genspider  +&lt;爬虫名字&gt; + &lt;允许爬取的域名&gt;          生成普通的spider爬虫</span></div></li><li><div><span style="font-size: 9pt;">scrapy genspider -t crawl &lt;爬虫名字&gt;  &lt;允许爬取的域名&gt;        生成crawl_Spider爬虫</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">示例：</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy genspider itcast “itcast.cn”</span></div></li></ul><li><div><span style="font-size: 9pt; font-weight: bold;">爬虫应用创建的位置</span></div></li><ul><li><div><img src="/e_img/scrapy框架介绍_files/Image [4].png" type="image/png" data-filename="Image.png" width="228"/></div></li></ul></ul><li><div><span style="font-size: 10pt; font-weight: bold;">启动爬虫应用</span></div></li><ul><li><div><span style="font-size: 12px; font-weight: bold;">命令</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy crawl 爬虫名   执行单个爬虫</span></div></li><ul><li><div><span style="font-size: 9pt;">-o: 将爬虫的item输出存储到文件中.</span></div></li><ul><li><div><span style="font-size: 9pt;">quotes.jl : 将每一个item输出为一行的jsonline</span></div></li><li><div><span style="font-size: 9pt;">quotes.csv: 将每一个item输出为每一行的csv格式文件</span></div></li><li><div><span style="font-size: 9pt;">quotes.pickle: 存储为二进制文件</span></div></li></ul></ul></ul></ul></ul><div><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(50, 135, 18); font-weight: bold;-evernote-highlight:true;">Scrapy--scrapy shell</span></div><ul><li><div><span style="font-size: 10pt; font-weight: bold;">什么是scrapy shell</span></div></li><ul><li><div><span style="font-size: 9pt;">Scrapy shell是一个交互终端，我们可以在未启动spider的情况下尝试及调试代码，也可以用来测试XPath表达式</span></div></li></ul><li><div><span style="font-weight: bold;">查看实例属性/方法</span></div></li><ul><li><div><span style="font-size: 9pt; font-weight: bold;">在scrapy shell中查看</span></div></li><ul><li><div><span style="font-size: 9pt;">进行请求</span></div></li><ul><li><div><span style="font-size: 9pt;">scrapy shell ‘url’   对url地址进行请求获取响应</span></div></li></ul><li><div><span style="font-size: 9pt;">查看请求的属性</span></div></li><ul><li><div><span style="font-weight: bold; font-size: 9pt;">可使用任意scrapy实例 + TAB查看实例有哪些属性或者方法</span></div></li><li><div><span style="font-size: 9pt;">response.url：当前响应的url地址</span></div></li><li><div><span style="font-size: 9pt;">response.request.url：当前响应对应的请求的url地址</span></div></li><li><div><span style="font-size: 9pt;">response.headers：响应头</span></div></li><li><div><span style="font-size: 9pt;">response.body：响应体，也就是html代码，默认是byte类型</span></div></li><li><div><span style="font-size: 9pt;">response.requests.headers：当前响应的请求头</span></div></li><li><div><span style="font-size: 9pt;">response.meta: 下载延迟，请求深度等信息</span></div></li><li><div><span style="font-size: 9pt;">response.xpath(***).extract()    验证xpath的正确性</span></div></li></ul></ul><li><div><span style="font-weight: bold; font-size: 9pt;">在程序中</span></div></li><ul><li><div><span style="font-size: 9pt;">print（dir（实例对象））  查看实例对象的所有属性和方法</span></div></li></ul></ul></ul><div><br/></div></div><div><br/></div></span>
</div></body></html>